---
author: Unknown
blogger_id: tag:blogger.com,1999:blog-6088150582281556517.post-5195127610508781331
blogger_orig_url: http://blog.llvm.org/2015/04/llilc-llvm-based-compiler-for-dotnet.html
url: "2015/04/llilc-llvm-based-compiler-for-dotnet.html"
date: "2015-04-14T07:03:00Z"
modified_time: "2015-04-14T07:03:44.011-07:00"
tags: ["llvm-users"] 
thumbnail: http://2.bp.blogspot.com/-5_tqqSVjMf4/VS0cQEhSHrI/AAAAAAAAAE0/kOOiDM4_XAs/s72-c/JITArch.png
title: null
---

<h2 id="-llilc-https-github-com-dotnet-llilc-an-llvm-based-compiler-for-dotnet-coreclr-" style="-webkit-font-feature-settings: 'dlig' 1, 'liga' 1, 'lnum' 1, 'kern' 1; box-sizing: border-box; color: #373d49; font-family: 'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 1.95312rem; line-height: 3rem; margin-bottom: 0.18358rem; margin-top: 0px; padding-top: 0.81642rem;"><span style="background-color: #f3f3f3;"><a href="https://github.com/dotnet/llilc" style="background-attachment: initial; background-clip: initial; background-image: initial; background-origin: initial; background-position: 0px 0px; background-repeat: initial; background-size: initial; box-sizing: border-box; color: #a0aabf; cursor: pointer;">LLILC</a>&nbsp;: An LLVM based compiler for dotnet CoreCLR.</span></h2><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><span style="background-color: #f3f3f3;">The LLILC project (we pronounce it "lilac") is a new effort started at Microsoft to produce MSIL code generators based on LLVM and targeting the open source dotnet&nbsp;<a href="https://github.com/dotnet/coreclr" style="background-attachment: initial; background-clip: initial; background-image: initial; background-origin: initial; background-position: 0px 0px; background-repeat: initial; background-size: initial; box-sizing: border-box; color: #a0aabf; cursor: pointer;">CoreCLR</a>. We are envisioning using the LLVM infrastructure for a number of scenarios, but our first tool is a Just in Time (JIT) compiler for CoreCLR. This new project is being developed on GitHub and you can check it out&nbsp;<a href="https://github.com/dotnet/llilc" style="background-attachment: initial; background-clip: initial; background-image: initial; background-origin: initial; background-position: 0px 0px; background-repeat: initial; background-size: initial; box-sizing: border-box; color: #a0aabf; cursor: pointer;">here</a>. The rest of this post outlines the rational and goals for the project as well as our experience using LLVM.</span></div><h4 id="why-a-new-jit-for-coreclr-" style="-webkit-font-feature-settings: 'dlig' 1, 'liga' 1, 'lnum' 1, 'kern' 1; box-sizing: border-box; color: #373d49; font-family: 'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 1.5625rem; line-height: 28px; margin-bottom: 0.54686rem; margin-top: 0px; padding-top: 0.45314rem;"><span style="background-color: #f3f3f3;">Why a new JIT for CoreCLR?</span></h4><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><span style="background-color: #f3f3f3;">While the CoreCLR already has JIT, we saw an opportunity to provide a new code generator that has the potential to run across all the targets and platforms supported by LLVM. To enable this, as part of our project we're opening an MSIL reader that operates directly against the same common JIT interface as the production JIT (RyuJIT). This new JIT will allow any C# program written for the .NET Core class libraries to run on any platform that CoreCLR can be ported to and that LLVM will target.</span></div><h4 id="there-are-several-ongoing-efforts-to-compile-msil-in-the-llvm-community-sharplang-springs-to-mind-why-build-another-one-" style="-webkit-font-feature-settings: 'dlig' 1, 'liga' 1, 'lnum' 1, 'kern' 1; box-sizing: border-box; color: #373d49; font-family: 'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 1.5625rem; line-height: 28px; margin-bottom: 0.54686rem; margin-top: 0px; padding-top: 0.45314rem;"><span style="background-color: #f3f3f3;">There are several ongoing efforts to compile MSIL in the LLVM community, SharpLang springs to mind. Why build another one?</span></h4><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><span style="background-color: #f3f3f3;">When we started thinking about the fastest way to get a LLVM based code generation working we looked around at the current open source projects as well as the code we had internally. While a number of the OSS projects already targeted LLVM BitCode, no one had anything that was a close match for the CoreCLR interface. Looking at our options it was simplest for us to refactor a working MSIL reader to target BitCode then teach a existing project to support the contracts and APIs the CoreCLR uses for JITing MSIL. Using a existing MSIL reader let us quickly start using a number of building-block components that we think the community can take advantage of. This fast bootstrap for C# across multiple platforms was the idea that was the genesis of this project and the compelling reason to start a new effort. We hope LLILC will provide a useful example - and reusable components - for the community and make it easier for other projects to interoperate with the CoreCLR runtime.</span></div><h4 id="why-llvm-" style="-webkit-font-feature-settings: 'dlig' 1, 'liga' 1, 'lnum' 1, 'kern' 1; box-sizing: border-box; color: #373d49; font-family: 'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 1.5625rem; line-height: 28px; margin-bottom: 0.54686rem; margin-top: 0px; padding-top: 0.45314rem;"><span style="background-color: #f3f3f3;">Why LLVM?</span></h4><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><span style="background-color: #f3f3f3;">Basically we think LLVM is awesome. It's already got great support across many platforms and chipsets and the community is amazingly active. When we started getting involved, just trying to stay current with the developer mailing list was a revelation! The ability for LLVM to operate as both a JIT and as an AOT compiler was especially attractive. By bringing MSIL semantics to LLVM we plan to construct a number of tools that can work against CoreCLR or some sub set of its components. We also hope the community will produce tools what we haven't thought of yet.</span></div><h4 id="tool-roadmap" style="-webkit-font-feature-settings: 'dlig' 1, 'liga' 1, 'lnum' 1, 'kern' 1; box-sizing: border-box; color: #373d49; font-family: 'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 1.5625rem; line-height: 28px; margin-bottom: 0.54686rem; margin-top: 0px; padding-top: 0.45314rem;"><span style="background-color: #f3f3f3;">Tool roadmap</span></h4><ul style="box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 0.83999rem; padding-top: 0.16001rem;"><li style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; margin-left: 1rem;"><span style="background-color: #f3f3f3;">CoreCLR JIT</span><ul style="box-sizing: border-box; margin-bottom: 0px; padding-top: 0.16001rem;"><li style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; margin-left: 1rem;"><span style="background-color: #f3f3f3;">Just In Time - A classic JIT. This is expected to be throughput-challenged but will be correct and usable for bringup. Also possible to use with more optimization enabled as a higher tier JIT</span></li><li style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; margin-left: 1rem;"><span style="background-color: #f3f3f3;">Install-time JIT - What .NET calls NGen. This will be suitable for install-time JITing (LLVM is still slow in a runtime configuration)</span></li></ul></li><li style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; margin-left: 1rem;"><span style="background-color: #f3f3f3;">Ahead of Time compiler. A build lab compiler that produces standalone executables, using some shared components from CoreCLR. The AOT compiler will be used to improve startup time for important command line applications like the&nbsp;<a href="https://github.com/dotnet/roslyn" style="background-attachment: initial; background-clip: initial; background-image: initial; background-origin: initial; background-position: 0px 0px; background-repeat: initial; background-size: initial; box-sizing: border-box; color: #a0aabf; cursor: pointer;">Roslyn Compiler</a>.</span></li></ul><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><span style="background-color: #f3f3f3;">The LLIC JIT will be a functionally correct and complete JIT for the CoreCLR runtime. It may not have sufficient throughput to be a first-tier jit, but is expected to produce high-quality code and so might make a very interesting second-tier or later JIT, or a good vehicle for prototyping codegen changes to feed back into RyuJIT.</span></div><h2 id="what-s-actually-working" style="-webkit-font-feature-settings: 'dlig' 1, 'liga' 1, 'lnum' 1, 'kern' 1; box-sizing: border-box; color: #373d49; font-family: 'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 1.95312rem; line-height: 3rem; margin-bottom: 0.18358rem; margin-top: 0px; padding-top: 0.81642rem;"><span style="background-color: #f3f3f3;">What's Actually Working</span></h2><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><span style="background-color: #f3f3f3;">Today on Windows we have the MSIL reader &amp; LLVM JIT implemented well enough to compile a significant number of methods in the JIT bring up tests included in CoreCLR. In these tests we compile about 90% the methods and then fall back to RyuJIT for cases we can't handle yet. The testing experience is pretty decent for developers. The tests we run can be seen in the CoreCLR&nbsp;<a href="https://github.com/dotnet/coreclr/tree/master/tests/src/JIT/CodeGenBringUpTests" style="background-attachment: initial; background-clip: initial; background-image: initial; background-origin: initial; background-position: 0px 0px; background-repeat: initial; background-size: initial; box-sizing: border-box; color: #a0aabf; cursor: pointer;">test repo</a>.</span></div><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><span style="background-color: #f3f3f3;">We've establish builds on Linux and Mac OSX and are pulling together mscorlib, the base .NET Core library from&nbsp;<a href="https://github.com/dotnet/corefx" style="background-attachment: initial; background-clip: initial; background-image: initial; background-origin: initial; background-position: 0px 0px; background-repeat: initial; background-size: initial; box-sizing: border-box; color: #a0aabf; cursor: pointer;">CoreFx</a>, and test asset dependencies to get testing off-the-ground for those platforms.</span></div><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><span style="background-color: #f3f3f3;">All tests run against the CoreCLR GC in conservative mode - which scans the frame for roots - rather than precise mode. We don't yet support Exception Handling.</span></div><h2 id="architecture" style="-webkit-font-feature-settings: 'dlig' 1, 'liga' 1, 'lnum' 1, 'kern' 1; box-sizing: border-box; color: #373d49; font-family: 'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 1.95312rem; line-height: 3rem; margin-bottom: 0.18358rem; margin-top: 0px; padding-top: 0.81642rem;"><span style="background-color: #f3f3f3;">Architecture</span></h2><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><span style="background-color: #f3f3f3;">Philosophically LLILC is intended to provide a lean interface between CoreCLR and LLVM. Where possible we rely on preexisting technology.</span></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-5_tqqSVjMf4/VS0cQEhSHrI/AAAAAAAAAE0/kOOiDM4_XAs/s1600/JITArch.png" imageanchor="1" style="background-color: #f3f3f3; margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-5_tqqSVjMf4/VS0cQEhSHrI/AAAAAAAAAE0/kOOiDM4_XAs/s1600/JITArch.png" height="255" width="320" /></a></div><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><span style="background-color: #f3f3f3;"><br /></span></div><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><span style="background-color: #f3f3f3;">For the JIT, when we are compiling on demand, we map the runtime types and MSIL into LLVM BitCode. From there compilation uses LLVM MCJIT infrastructure to produce compiled code that is output to buffers provided by CoreCLR.</span></div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-NUl_WpPgYL8/VS0cWHeLVlI/AAAAAAAAAE8/0zJmQGulwc8/s1600/AOTArch.png" imageanchor="1" style="background-color: #f3f3f3; margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-NUl_WpPgYL8/VS0cWHeLVlI/AAAAAAAAAE8/0zJmQGulwc8/s1600/AOTArch.png" height="282" width="320" /></a></div><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><span style="background-color: #f3f3f3;"><br /></span></div><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><span style="background-color: #f3f3f3;">Our AOT diagram is more tentative but the basic outline is that the code generator is driven using the same interface and the JIT but that there is a static type system behind it and we build up a whole program module with in LLVM and run in a LTO like mode. Required runtime components are emitted with the output objs and the platform linker then produces the target executable. There are still a number of open questions around issues like generics that need resolution but this is our first stake in the ground.</span></div><h2 id="experience-with-llvm" style="-webkit-font-feature-settings: 'dlig' 1, 'liga' 1, 'lnum' 1, 'kern' 1; box-sizing: border-box; color: #373d49; font-family: 'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 1.95312rem; line-height: 3rem; margin-bottom: 0.18358rem; margin-top: 0px; padding-top: 0.81642rem;"><span style="background-color: #f3f3f3;">Experience with LLVM</span></h2><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><span style="background-color: #f3f3f3;">In the few months we've been using LLVM, we've had a really good experience but with a few caveats. Getting started with translating to BitCode has been a very straightforward experience and ramp-up time for someone with compiler experience has been very quick. The MCJIT, which we started with for our JIT, was easy to configure and get code compiled and returned to the runtime. Outside of the COFF issue discussed below, we only had to make adjustments in configuration or straightforward overrides of classes, like EEMemoryManager, to enable working code. Of the caveats, the first was simple, but the other two are going to require sustained work to bring up to the level we'd like. The first issue was a problem with Windows support in the DynamicRuntime of the MCJIT infrastructure. The last two, Precise Garbage Collection, and Exception Handling, arise because of the different semantics of managed languages. Luckily for us, people in the community have already started working in these areas so we don't have to start from zero.</span></div><h4 id="coff-dynamic-loader-support" style="-webkit-font-feature-settings: 'dlig' 1, 'liga' 1, 'lnum' 1, 'kern' 1; box-sizing: border-box; color: #373d49; font-family: 'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 1.5625rem; line-height: 28px; margin-bottom: 0.54686rem; margin-top: 0px; padding-top: 0.45314rem;"><span style="background-color: #f3f3f3;">COFF dynamic loader support</span></h4><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><span style="background-color: #f3f3f3;">One of the additions we made to LLVM to unblock ourselves was to implement a COFF dynamic loader. (The patch to add RuntimeDyldCoff.{h,cpp} is through review and has been committed). This was the only addition we directly had to make to LLVM to enable bring-up of the code generator. Once this is in, we see a number of bugs in the database around Windows JIT support that should be easier to close.</span></div><h4 id="precise-garbage-collection" style="-webkit-font-feature-settings: 'dlig' 1, 'liga' 1, 'lnum' 1, 'kern' 1; box-sizing: border-box; color: #373d49; font-family: 'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 1.5625rem; line-height: 28px; margin-bottom: 0.54686rem; margin-top: 0px; padding-top: 0.45314rem;"><span style="background-color: #f3f3f3;">Precise Garbage Collection</span></h4><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><span style="background-color: #f3f3f3;">Precise GC is central to the CoreCLR approach to memory management. Its intent is to keep the overhead of managed memory as low as possible. It is assumed by the runtime that the JIT will generate precise information about the GC ref lifetimes and provide it with the compiled code for execution. To support this we're beginning to use the&nbsp;<a href="http://llvm.org/docs/Statepoints.html" style="background-attachment: initial; background-clip: initial; background-image: initial; background-origin: initial; background-position: 0px 0px; background-repeat: initial; background-size: initial; box-sizing: border-box; color: #a0aabf; cursor: pointer;">StatePoint</a>&nbsp;approach, with additions to convert the standard output format to the custom format expected by CoreCLR. We share some of the same concerns that Philip Reames wrote about in the initial design of StatePoints. E.g. preservation of "GCness" through the optimizer is critical, but must not block optimizer transformations. Given this concern one of our open questions is how to enable testing to find GC holes that creep in, but also enable extra checking that can be opted into if the incoming IR contains GC pointers.</span></div><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><span style="background-color: #f3f3f3;">There is a more detailed document included in our repo that outlines our more-specific GC plans&nbsp;<a href="https://github.com/dotnet/llilc/blob/master/Documentation/llilc-gc.md" style="background-attachment: initial; background-clip: initial; background-image: initial; background-origin: initial; background-position: 0px 0px; background-repeat: initial; background-size: initial; box-sizing: border-box; color: #a0aabf; cursor: pointer;">here</a>.</span></div><h4 id="exception-handling" style="-webkit-font-feature-settings: 'dlig' 1, 'liga' 1, 'lnum' 1, 'kern' 1; box-sizing: border-box; color: #373d49; font-family: 'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 1.5625rem; line-height: 28px; margin-bottom: 0.54686rem; margin-top: 0px; padding-top: 0.45314rem;"><span style="background-color: #f3f3f3;">Exception Handling</span></h4><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><span style="background-color: #f3f3f3;">The MSIL EH model is specific to the CLR as you'd expect, but it descends in part conceptually from Windows Structured Exception Handling (SEH). In particular, the implicit exception flow from memory accesses to implement null checks, and the use of filters and funclets in the handling of exceptions, mirrors SEH (<a href="https://msdn.microsoft.com/en-us/library/ms173162.aspx" style="background-attachment: initial; background-clip: initial; background-image: initial; background-origin: initial; background-position: 0px 0px; background-repeat: initial; background-size: initial; box-sizing: border-box; color: #a0aabf; cursor: pointer;">here</a>. is an outline of C# EH) Our plans at this point are to add all checks required by MSIL as explicit compare/branch/throw sequences to better match C++ EH as well as building on the SEH support currently being put into Clang. Then, once we have correctness, see if there is a reasonable way forward that improves performance.</span></div><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><span style="background-color: #f3f3f3;">Like GC, there's a detailed doc outlining our specific issues and plans in the repo&nbsp;<a href="https://github.com/dotnet/llilc/blob/master/Documentation/llilc-jit-eh.md" style="background-attachment: initial; background-clip: initial; background-image: initial; background-origin: initial; background-position: 0px 0px; background-repeat: initial; background-size: initial; box-sizing: border-box; color: #a0aabf; cursor: pointer;">here</a></span></div><h2 id="future-work" style="-webkit-font-feature-settings: 'dlig' 1, 'liga' 1, 'lnum' 1, 'kern' 1; box-sizing: border-box; color: #373d49; font-family: 'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 1.95312rem; line-height: 3rem; margin-bottom: 0.18358rem; margin-top: 0px; padding-top: 0.81642rem;"><span style="background-color: #f3f3f3;">Future Work</span></h2><ul style="box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 0.83999rem; padding-top: 0.16001rem;"><li style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; margin-left: 1rem;"><span style="background-color: #f3f3f3;">More platforms. Today we're running on Windows and starting to build for Linux and Mac OSX. We'd like more.</span></li><li style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; margin-left: 1rem;"><span style="background-color: #f3f3f3;">Complete JIT implementation</span><ul style="box-sizing: border-box; margin-bottom: 0px; padding-top: 0.16001rem;"><li style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; margin-left: 1rem;"><span style="background-color: #f3f3f3;">More MSIL opcodes supported</span></li><li style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; margin-left: 1rem;"><span style="background-color: #f3f3f3;">Precise GC support</span></li><li style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; margin-left: 1rem;"><span style="background-color: #f3f3f3;">EH support</span></li></ul></li><li style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; margin-left: 1rem;"><span style="background-color: #f3f3f3;">Specialized memory allocators for hosted solutions. CoreCLR has been used as a hosted solution (run in process by other programs) but to support this we need a better memory allocation story. The runtime should be able to provide a memory allocator that is used for all compilation.</span></li><li style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; margin-left: 1rem;"><span style="background-color: #f3f3f3;">AOT - Fully flesh out the AOT story.</span></li></ul><h4 id="links" style="-webkit-font-feature-settings: 'dlig' 1, 'liga' 1, 'lnum' 1, 'kern' 1; box-sizing: border-box; color: #373d49; font-family: 'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 1.5625rem; line-height: 28px; margin-bottom: 0.54686rem; margin-top: 0px; padding-top: 0.45314rem;"><span style="background-color: #f3f3f3;">Links</span></h4><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><a href="https://github.com/dotnet/llilc" style="background-attachment: initial; background-clip: initial; background-color: #f3f3f3; background-image: initial; background-origin: initial; background-position: 0px 0px; background-repeat: initial; background-size: initial; box-sizing: border-box; color: #a0aabf; cursor: pointer;">LLILC</a></div><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><a href="https://github.com/dotnet/coreclr" style="background-attachment: initial; background-clip: initial; background-color: #f3f3f3; background-image: initial; background-origin: initial; background-position: 0px 0px; background-repeat: initial; background-size: initial; box-sizing: border-box; color: #a0aabf; cursor: pointer;">CoreCLR</a></div><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><a href="https://github.com/dotnet/corefx" style="background-attachment: initial; background-clip: initial; background-color: #f3f3f3; background-image: initial; background-origin: initial; background-position: 0px 0px; background-repeat: initial; background-size: initial; box-sizing: border-box; color: #a0aabf; cursor: pointer;">CoreFx</a></div><div style="-webkit-font-feature-settings: 'kern' 1, 'onum' 1, 'liga' 1; box-sizing: border-box; color: #373d49; font-family: Georgia, Cambria, serif; font-size: 14px; line-height: 28px; margin-bottom: 1.33999rem; padding-top: 0.66001rem;"><a href="http://www.dotnetfoundation.org/" style="background-attachment: initial; background-clip: initial; background-color: #f3f3f3; background-image: initial; background-origin: initial; background-position: 0px 0px; background-repeat: initial; background-size: initial; box-sizing: border-box; color: #a0aabf; cursor: pointer;">.NET Foundation</a></div>
