---
author: Alex Bradbury
blogger_id: tag:blogger.com,1999:blog-6088150582281556517.post-2378887590602480914
blogger_orig_url: http://blog.llvm.org/2016/02/llvm-weekly-110-feb-8th-2016.html
url: "2016/02/llvm-weekly-110-feb-8th-2016.html"
date: "2016-02-08T08:44:00Z"
modified_time: "2016-02-08T08:44:25.734-08:00"
tags: ["llvmweekly"]
title: 'LLVM Weekly - #110, Feb 8th 2016'
aliases:
 - /2016/02/llvm-weekly-110-feb-8th-2016.html
---

<p>Welcome to the one hundred and tenth issue of LLVM Weekly, a weekly newsletter  (published every Monday) covering developments in LLVM, Clang, and related  projects. LLVM Weekly is brought to you by <a href="http://asbradbury.org">Alex  Bradbury</a>. Subscribe to future issues at  <a href="http://llvmweekly.org">http://llvmweekly.org</a> and pass it on to anyone else you think may be   interested. Please send any tips or feedback to <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#97;&#115;&#98;&#64;&#97;&#115;&#98;&#114;&#97;&#100;&#98;&#117;&#114;&#121;&#46;&#111;&#114;&#103;">&#97;&#115;&#98;&#64;&#97;&#115;&#98;&#114;&#97;&#100;&#98;&#117;&#114;&#121;&#46;&#111;&#114;&#103;</a>, or <a href="https://twitter.com/llvmweekly">@llvmweekly</a> or <a    href="https://twitter.com/asbradbury">@asbradbury</a> on Twitter.</p>  <p>The canonical home for this issue <a href="http://llvmweekly.org/issue/110">can be found here at llvmweekly.org</a>. </p> <a name='more'></a> <h3>News and articles from around the web</h3><p>Slides from the LLVM devroom at FOSDEM last weekend are <a href="http://llvm.org/devmtg/2016-01/">now available  online</a>. Unfortunately there was an issue  with the recording of the talks so videos will not be available.</p><p>JavaScriptCore's <a href="https://trac.webkit.org/wiki/FTLJIT">FTL JIT</a> is moving away  from using LLVM as its backend, towards <a href="https://webkit.org/docs/b3/">B3 (Bare Bones  Backend)</a>. This includes its own <a href="https://webkit.org/docs/b3/intermediate-representation.html">SSA  IR</a>,  optimisations, and instruction selection backend.</p><p>Source tarballs and binaries are <a href="http://lists.llvm.org/pipermail/llvm-dev/2016-February/094987.html">now  available</a>  for LLVM and Clang 3.8-RC2.</p><p>The Zurich LLVM Social <a href="http://lists.llvm.org/pipermail/llvm-dev/2016-February/094759.html">is coming up this  Thursday</a>,  February 11th at 7pm.</p><p>Jeremy Bennett has written up a <a href="http://www.embecosm.com/2016/02/05/how-similar-are-gcc-and-llvm-the-user-perspective/">comparison of the Clang and GCC command-line  flags</a>. The headline summary is that 397 work in both GCC and LLVM, 433 are LLVM-only  and 598 are GCC-only.</p><p><a href="https://github.com/alepez/vim-llvmcov">vim-llvmcov</a> has been released. It is  a vim plugin to show code coverage using the llvm-cov tool.</p><h3>On the mailing lists</h3><ul><li><p>Mehdi Amini has posted an <a href="http://lists.llvm.org/pipermail/llvm-dev/2016-February/094869.html">RFC on floating point environment and rounding  mode handling in  LLVM</a>. The  work started all the way back in 2014 and has a whole bunch of patches up for  review. Chandler Carruth has responded with a <a href="http://lists.llvm.org/pipermail/llvm-dev/2016-February/094916.html">detail description of his  concerns about the current  design</a>,  and his proposed alternative seems to be getting a lot of positive feedback.</p></li><li><p>Morten Brodersen has recently upgraded a number of applications from the old  JIT to the new MCJIT under LLVM 3.7.1 but has <a href="http://lists.llvm.org/pipermail/llvm-dev/2016-February/094908.html">found significant performance  regressions</a>. Some other respondents have seen similar issues, either in compilation time or  in reduced code quality in the generated code. Some of the thread participants  will be providing specific examples so they can be investigated. It's possible  the issue is something as simple as a different default somewhere. Benoit  Belley noted <a href="http://lists.llvm.org/pipermail/llvm-dev/2016-February/094946.html">they saw regressions due to their frontend's use of allocas in  3.7</a>.</p></li><li><p>Lang Hames kicked off a long discussion about <a href="http://lists.llvm.org/pipermail/llvm-dev/2016-February/094804.html">error handling in LLVM  libraries</a>. Lang has implemented a new scheme and is seeking feedback on it. There's a lot  of discussion that unfortunately I haven't had time to summarise properly. If  error handling design interests you, do get stuck in.</p></li><li><p>Adrian McCarthy has written up details on the <a href="http://lists.llvm.org/pipermail/lldb-dev/2016-February/009533.html">recent addition of minidump  support to  LLDB</a>. Minidumps are the Windows equivalent of a core file.</p></li><li><p>Juan Wajnerman is looking at adding support for multithreading to the  Crystal language, and has a <a href="http://lists.llvm.org/pipermail/llvm-dev/2016-February/094736.html">question about thread local  variables</a>. LLVM won't re-load the thread local address, which causes issues when a thread  local variable is read in a coroutine running on one thread which is then  suspended and continued on a different thread. This is apparently a known  issue, covered by <a href="https://llvm.org/bugs/show_bug.cgi?id=19177">PR19177</a>.</p></li><li><p>Steven Wu has posted an <a href="http://lists.llvm.org/pipermail/llvm-dev/2016-February/094851.html">RFC on embedding bitcode in object  files</a>. The intent is to upstream support that already exists in Apple's fork. Understandably some of the respondents asked how this relates to the .llvmbc  section that the Thin-LTO work is introducing. Steven indicates it's pretty  much the same, but for Mach-O rather than ELF and that he hopes to unify them  during the upstreaming.</p></li></ul><h3>LLVM commits</h3><ul><li><p>LLVM now has a memory SSA form. This isn't yet used by anything in-tree, but  should form a very useful basis for a variety of analyses and transformations. This patch has been baking for a long time, first being submitted for initial  feedback in April last year. <a href="http://reviews.llvm.org/rL259595">r259595</a>.</p></li><li><p>A new loop versioning loop-invariant code motion (LICM) pass was introduced. This enables more opportunities for LICM by creating a new version of the loop  guarded by runtime checks to test for potential aliases that can't be  determined not to exist at compile-time. <a href="http://reviews.llvm.org/rL259986">r259986</a>.</p></li><li><p>LazyValueInfo gained an intersect operation on lattice values, which can be  used to exploit multiple sources of facts at once. The intent is to make  greater use of it, but already it is able to remove a half range-check when  performing jump-threading. <a href="http://reviews.llvm.org/rL259461">r259461</a>.</p></li><li><p>The SmallSet and SmallPtrSet templates will now error out if created with a  size greater than 32. <a href="http://reviews.llvm.org/rL259419">r259419</a>.</p></li><li><p>The ability to emit errors from the backend for unsupported features has  been refactored, so BPF, WebAssembly, and AMDGPU backends can all share the  same implementation. <a href="http://reviews.llvm.org/rL259498">r259498</a>.</p></li><li><p>A simple pass using LoopVersioning has been added, primarily for testing. The new pass will fully disambiguate all may-aliasing memory accesses no  matter how many runtime checks are required. <a href="http://reviews.llvm.org/rL259610">r259610</a>.</p></li><li><p>The way bitsets are used to encode type information has now been documented. <a href="http://reviews.llvm.org/rL259619">r259619</a>.</p></li><li><p>You can now use the flag <code>-DLLVM_ENABLE_LTO</code> with CMake to build LLVM with  link-time optimisation. <a href="http://reviews.llvm.org/rL259766">r259766</a>.</p></li><li><p>TableGen's AsmOperandClass gained the <code>IsOptional</code> field. Setting this to 1  means the operand is optional and the AsmParser will not emit an error if the  operand isn't present. <a href="http://reviews.llvm.org/rL259913">r259913</a>.</p></li><li><p>There is now a scheduling model for the Exynos-M1. <a href="http://reviews.llvm.org/rL259958">r259958</a>.</p></li></ul><h3>Clang commits</h3><ul><li><p>Clang now has builtins for the bitreverse intrinsic. <a href="http://reviews.llvm.org/rL259671">r259671</a>.</p></li><li><p>The option names for profile-guided optimisations with the cc1 driver have  been modified. <a href="http://reviews.llvm.org/rL259811">r259811</a>.</p></li></ul><h3>Other project commits</h3><ul><li><p>AddressSanitizer now supports iOS. <a href="http://reviews.llvm.org/rL259451">r259451</a>.</p></li><li><p>The current policy for using the new ELF LLD as a library has been  documented. <a href="http://reviews.llvm.org/rL259606">r259606</a>.</p></li><li><p>Polly's new Sphinx documentation gained a guide on using Polly with Clang. <a href="http://reviews.llvm.org/rL259767">r259767</a>.</p></li></ul>
