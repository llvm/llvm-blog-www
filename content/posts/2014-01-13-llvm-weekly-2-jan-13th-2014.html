---
author: Alex Bradbury
blogger_id: tag:blogger.com,1999:blog-6088150582281556517.post-7774575261403632900
blogger_orig_url: http://blog.llvm.org/2014/01/llvm-weekly-2-jan-13th-2014.html
url: "2014/01/llvm-weekly-2-jan-13th-2014.html"
date: "2014-01-13T07:29:00Z"
modified_time: "2014-04-06T10:28:33.489-07:00"
tags: ["llvmweekly"]
title: 'LLVM Weekly - #2, Jan 13th 2014'
aliases:
 - /2014/01/llvm-weekly-2-jan-13th-2014.html
---

<p>Welcome to the second issue of LLVM Weekly (and the first to appear on the LLVM blog). LLVM Weekly is a newsletter (published  every Monday) covering developments in LLVM, Clang, and related projects. Thank you to everyone who has given positive feedback or suggestions, I'm  planning in future editions to integrate some sort of statistics of git activity  and contributions as well as activity on Bugzilla. LLVM Weekly is  brought to you by <a href="http://asbradbury.org">Alex Bradbury</a>. Subscribe to future  issues at <a href="http://llvmweekly.org">http://llvmweekly.org</a> and pass it on to anyone else you think may  be interested. Please send any tips or feedback to <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#97;&#115;&#98;&#64;&#97;&#115;&#98;&#114;&#97;&#100;&#98;&#117;&#114;&#121;&#46;&#111;&#114;&#103;">&#97;&#115;&#98;&#64;&#97;&#115;&#98;&#114;&#97;&#100;&#98;&#117;&#114;&#121;&#46;&#111;&#114;&#103;</a>, or  <a href="https://twitter.com/llvmweekly">@llvmweekly</a> or <a href="https://twitter.com/asbradbury">@asbradbury</a> on Twitter. </p><p>The canonical home for this issue <a href="http://llvmweekly.org/issue/2">can be found here at llvmweekly.org</a>. </p> <a name='more'></a> <h3>News and articles from around the web</h3><p>Stephen Diehl has published a <a href="http://www.stephendiehl.com/llvm/">Haskell adaptation of the 'Kaleidoscope'  tutorials</a> on how to implement aJIT  compiled language using LLVM. This was received very positively and prompted  some <a href="https://news.ycombinator.com/item?id=7031998">discussion on HN</a>.</p><p>Registration for EuroLLVM is <a href="http://llvm.org/devmtg/2014-04/">now open</a>. There's still time to submit your talk, poster or workshop proposals too.</p><p><a href="https://github.com/mozilla/rust/blob/0.9/RELEASES.txt">Rust 0.9 has been  released</a>. Rust is a  systems programming language which targetting LLVM with a particular emphasis  on type safety, memory safety and concurrency. One of the core Rust developers  at Mozilla, Niko Matsakis, also gave a <a href="http://www.youtube.com/watch?v=gfCtbGiHcg0">talk at linux.conf.au introducing  Rust</a>.</p><p>Coverity 7 <a href="http://www.prnewswire.com/news-releases/coverity-unveils-new-version-of-development-testing-platform-239056251.html">now includes Clang compiler  support</a>.</p><h3>On the mailing lists</h3><ul><li><p>Apple are <a href="http://lists.cs.uiuc.edu/pipermail/llvmdev/2014-January/069169.html">advertising for  interns</a>  with their LLVM compiler frontend and runtime teams this summer. Note  internships are restricted to students.</p></li><li><p>Amara Emerson shares a <a href="article.gmane.org/gmane.comp.compilers.clang.devel/34199/">proposal on handling the removal of the -mfpu option  for AArch64</a>. This  proposal aims to match gcc, where instead of <code>-mfpu</code> to specify FPU/NEON, the  same information will be passed using feature modifiers on <code>-march</code>. It was  pointed out that GCC also has <code>-mcpu</code> to complicate things. It's hoped  collaboration with the GCC devs will lead to a simplification that both can  use.</p></li><li><p>Tobias Grosser has <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/69264">set up some new machines tracking performance at  -O3</a> using  <a href="http://llvm.org/docs/lnt/">LNT</a>, which is a framework used for performance  tracking of LLVM over time. Tobias is asking for someone to step in and  improve the LNT infrastructure to take advantage of this new data. LNT is  written in Python, using Flask and SQLAlchemy so this would be an ideal  project for someone interested in contributing to LLVM but perhaps doesn't  match the typical profile of the LLVM contributor.</p></li><li><p>Timothy Baldridge asks whether <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/69219">LLVM can inline external library functions  in a JITted  method</a>. Replies point out that for the specific example given (memcpy), LLVM is  already able to inline. Kevin Modzelewski <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/69236">describes a technique he's  used</a>.</p></li><li><p>Rafael Esp√≠ndola announces a new milestone, all in-tree backends <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/69369">now use  MCInst for printing  assembly</a>. Out  of tree targets will need to lower MachineInstr to MCInst to use the new  printer and the recent <a href="http://reviews.llvm.org/rL198030">conversion of the Sparc  backend</a> to do this is probably as  good a guide as any.</p></li><li><p>As part of the effort to use C++11 inside the LLVM codebase, Chandler  Carruth has asked anyone running build-bot to look at <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/69242">upgrading to the new  baseline compiler  versions</a>. These are MSVC 2012, GCC 4.7, or Clang 3.1.</p></li><li><p>Jasper Neumann has been <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/69383/">working on switch lowering using  hashing</a> as  an alternative to using a jump table. He later <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/69389/">further elaborates on the  technique</a>  and points to an interesting looking paper, <a href="http://ols.fedoraproject.org/GCC/Reprints-2008/sayle-reprint.pdf">Multiway Branch Code  Generation</a>  by Roger Anthony Sayle.</p></li><li><p>Kevin Modzelewski is encountering <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/69349">disappointing bitcode parsing  performance</a>,  in particular when debug info is present. The issue is not identified or  solved yet, I'm hoping to be able to point to an explanation of the problem in  next week's issue!</p></li><li><p>Chandler Carruth suggests that the <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/69244">interprocedual analysis passes be merged  in to the Analysis  library</a>. Right now, various interprocedural analyses live in lib/Analysis/IPA and are  built as the LLVMipa library. Chris Lattner agrees so we can expect the merge  to happen in the not too distant future.</p></li><li><p>Chandler Carruth has  <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/69392">suggested</a>  that the <a href="http://www.llvm.org/docs/CodingStandards.html">LLVM coding  standards</a> be updated so that  namespaces are never indented, as opposed to the current confusing mixture. Despite the fact that debating whitespace is a favourite pastime of most  programmers, the thread has been fairly uncontroversial thus far.</p></li><li><p>Milian Wolff wonders about <a href="http://article.gmane.org/gmane.comp.compilers.clang.devel/34168">using the clang C API to parse default  values</a>.</p></li><li><p>Renato Golin is working towards <a href="http://article.gmane.org/gmane.comp.compilers.clang.devel/34161">adding various pragmas to  Clang</a> and is  seeking feedback on how to implement it. A few people on the mailing list  suggest it might be worth trying to instead implement these using <a href="http://www.codesynthesis.com/~boris/blog/2012/04/18/cxx11-generalized-attributes/">C++11  generalized  attributes</a>  and perhaps enabling support for the syntax in C99.</p></li><li><p>The <code>__has_attribute</code> feature macro is commonly used to detect support for a  particular attribute in the compiler. Aaron Ballman <a href="http://article.gmane.org/gmane.comp.compilers.clang.scm/90321">suggests extending  it</a> so you can  test for the precise form of attribute syntax you are after.</p></li></ul><h3>LLVM commits</h3><ul><li><p>The Sparc ASM parser has seen further development, learning to parse branch  instructions, conditional moves, and floating point instructions and more. It  also gained an initial disassembler implementation. <a href="http://reviews.llvm.org/rL198738">r198738</a>,  <a href="http://reviews.llvm.org/rL199033">r199033</a>,  <a href="http://reviews.llvm.org/rL198591">r198591</a></p></li><li><p>In SimplifyCFG will now understand that when building a lookup table for a  switch with no holes that it doesn't need a default result. According to the  commit message, this saves 164KB off the clang binary in a bootstrap build. <a href="http://reviews.llvm.org/rL199025">r199025</a></p></li><li><p>The new pass manager saw further developments. <a href="http://reviews.llvm.org/rL198998">r198998</a> and many others  (prefixed with <code>[PM]</code> in the commit logs)</p></li><li><p>The SampleProfile pass saw further development. Profile samples are  propagated through the CFG, heuristically converting instruction samples to  branch weights. Work was done to extend and simplify the format of sample  profile input files. <a href="http://reviews.llvm.org/rL198972">r198972</a>,  <a href="http://reviews.llvm.org/rL198973">r198973</a></p></li><li><p>The LoopVectorizer can use versioning for strided memory access. <a href="http://reviews.llvm.org/rL198950">r198950</a></p></li><li><p>In DataLayout, 'w' is now used rather than 'c' for win32 name mangling. <a href="http://reviews.llvm.org/rL198938">r198938</a></p></li><li><p>The LLVM developer policy was updated to more clearly spell out how to  submit patches to the project. <a href="http://reviews.llvm.org/rL198901">r198901</a></p></li><li><p>WriteAsOperand has been killed in favour of the the printAsOperand method. <a href="http://reviews.llvm.org/rL198836">r198836</a></p></li><li><p>The x86 backend learned some more AVX-512 intrinsics. <a href="http://reviews.llvm.org/rL198745">r198745</a></p></li></ul><h3>Clang commits</h3><ul><li><p>Support for the <code>enable_if</code> attribute was added. This can be placed on  function declarations to control which overload is selected based on the  values of the function's arguments. See the commitdiff (particularly the docs  change) for more info. <a href="http://reviews.llvm.org/rL198996">r198996</a></p></li><li><p>More work on MS VC++ ABI compatibility was committed. <a href="http://reviews.llvm.org/rL198907">r198907</a>,  <a href="http://reviews.llvm.org/rL198975">r198975</a>,  <a href="http://reviews.llvm.org/rL198977">r198977</a>,  <a href="http://reviews.llvm.org/rL198900">r198900</a> and more.</p></li><li><p><code>__has_attribute</code> now understands target-specific attributes. <a href="http://reviews.llvm.org/rL198897">r198897</a></p></li><li><p>The clang plugin infrastructure is now covered by at least some tests. <a href="http://reviews.llvm.org/rL198747">r198747</a></p></li><li><p>The documentation on clang internals was updated with more up to date  information on adding new attributes. <a href="http://reviews.llvm.org/rL198705">r198705</a></p></li><li><p>An initial instrumentation-based profile guided optimisation implementation  landed. <a href="http://reviews.llvm.org/rL198640">r198640</a></p></li></ul>
