---
author: Marshall Clow
blogger_id: tag:blogger.com,1999:blog-6088150582281556517.post-8989940443352080325
blogger_orig_url: http://blog.llvm.org/2013/09/libc-and-c1y.html
url: "2013/09/libc-and-c1y.html"
date: "2013-09-23T12:44:00Z"
modified_time: "2013-09-23T12:44:43.980-07:00"
tags: ["C++","libc++","Clang"]
title: libc++ and C++1Y
---

I am proud to announce that as of September 21, libc++ has a full implementation of the C++1Y standard library. <br /><br />In April of 2013, the C++ standards committee approved a draft version of the next revision of the C++ language, called "C++1Y". (C++11 was called "C++0x" while in development). We hope that this draft standard will be approved next year, and become C++14. <br /><br />The draft standard includes changes to both the language and the standard library. These changes are designed to correct some mistakes that have been discovered in the C++11 standard and to add new features.<br /><br />Both clang and libc++ are being enhanced to support this new standard, and they each have a web page to show their current progress: <a href="http://clang.llvm.org/cxx_status.html">clang C++1Y Status</a> and <a href="http://libcxx.llvm.org/cxx1y_status.html">libc++ C++1Y status</a>.<br /><br />The C++ standards committee is meeting this week (September 23-28) to consider comments and defect reports in the C++1Y draft standard, and there will certainly be changes made.<br /><br />We could have waited until the final version of the C++1Y standard was approved; that would certainly have been less work. The draft standard will to be revised in September (and probably in February), so the libc++ implementation will have to change to track the standard.<br /><br />However, by implementing the draft standard has several advantages.<br /><ul><li>We gain experience in working with the new standard.</li><li>We found several places where the changes to the draft standard "exposed" other places were improvements can be made. For example, while implementing the new <code>optional</code> feature made it clear that interface of the the comparison functions <code>plus</code>, <code>less</code> (and others) could be enhanced. The result of that was the new paper <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3749.htm">n3749</a>.</li><li>By implementating the standard, we can identify problems/inconsistencies in the draft standard. For example, when we implemented the new library feature <code>dynarray</code>, we discovered that the interfaces for the allocator-based constructors for the container were <em>wrong</em>; in particular there were cases where it was not possible for the compiler to determine the correct constructor to call. This was raised as <a href="http://cplusplus.github.io/LWG/lwg-active.html#2255">LWG Issue 2255</a>, and will have to be resolved before the standard becomes final.</li></ul>
