---
author: Unknown
blogger_id: tag:blogger.com,1999:blog-6088150582281556517.post-1559296600619814001
blogger_orig_url: http://blog.llvm.org/2014/04/llvm-weekly-16-apr-21st-2014.html
date: "2014-04-21T05:46:00Z"
modified_time: "2014-04-24T05:17:41.469-07:00"
tags: ["llvmweekly"]
title: 'LLVM Weekly - #16, Apr 21st 2014'
aliases:
 - /2014/04/llvm-weekly-16-apr-21st-2014.html
---

<p>Welcome to the 16th issue of LLVM Weekly, a weekly newsletter (published every  Monday) covering developments in LLVM, Clang, and related projects. LLVM Weekly is brought to you by <a href="http://asbradbury.org">Alex Bradbury</a>. Subscribe to future issues at <a href="http://llvmweekly.org">http://llvmweekly.org</a> and pass it on to anyone  else you think may be interested. Please send any tips or feedback to  <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#97;&#115;&#98;&#64;&#97;&#115;&#98;&#114;&#97;&#100;&#98;&#117;&#114;&#121;&#46;&#111;&#114;&#103;">&#97;&#115;&#98;&#64;&#97;&#115;&#98;&#114;&#97;&#100;&#98;&#117;&#114;&#121;&#46;&#111;&#114;&#103;</a>, or <a href="https://twitter.com/llvmweekly">@llvmweekly</a> or <a href="https://twitter.com/asbradbury">@asbradbury</a> on Twitter.</p> <p>Apologies that last week's LLVM Weekly went out twice via email. Mailgun have  the useful ability to schedule an email for the future, but when this is done  incorrectly have no ability to cancel it via the API. Possibly there is no way  for them to cancel it either, I have no way to know as my support ticket on  the issue was never answered.</p><p>Seeing as it's Easter, does anybody know why GCC has a <a href="http://commons.wikimedia.org/wiki/File:GNU_Compiler_Collection_logo.svg">GNU breaking out of an egg as a logo</a>?</p> <p>The canonical home for this issue <a href="http://llvmweekly.org/issue/16">can be found here at llvmweekly.org</a>. </p>  <a name='more'></a> <h3>News and articles from around the web</h3><p>The new backend to <a href="https://github.com/kripken/emscripten">Emscripten</a> which  is implemented as an LLVM backend has <a href="https://groups.google.com/forum/#!topic/emscripten-discuss/FACubOKw2TI">now been merged to Emscripten's master  branch</a>. This should result in a noticeable speedup in compile times.</p><p>Phoronix have published a <a href="http://www.phoronix.com/scan.php?page=article&amp;item=gcc49_compiler_llvm35&amp;num=1">small set of benchmarks comparing GCC 4.9RC1 and Clang 3.5 HEAD</a>.</p><p>Diego Novillo has <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/72199">announced  AutoFDO</a>, a  tool which will convert profile data generated with <a href="https://perf.wiki.kernel.org">Linux  Perf</a> to a format compatible with LLVM's  sample-based profiler.</p><p>The Polly project have <a href="https://docs.google.com/document/d/14d3ehkh3/edit">minutes from another phone  call</a>,  this time focusing on delinearization.</p><h3>On the mailing lists</h3><ul><li><p>Jingyue Wu <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/72366">shares an initial patch for common sub-expression elimination  (CSE) for  getelementptr</a>. He and his colleagues had found that with the NVPTX backend, loop unrolling  often lead to groups of getelementptr instructions which added to register  pressure, but that these could often to optimised with some simple CSE. Feedback so far is positive on including something like this is a  target-independent pass, though there's interest in seeing whether it helps on  any other backends with open source benchmarks.</p></li><li><p>Austin Seipp has <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/72374">revived the issue of named register  variables</a>. He  adds perspective on the the utility of this feature for the Glasgow Haskell  Compiler (GHC). They are currently suffering a large performance loss on OS X  with clang due to the inability to dedicate a register for fast access to  thread-local storage. Renato Golin <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/72378">followed  up</a> with how  he thinks it is best to move forwards on the issue, while Mark Seaborn <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/72375">shared  a neat trick the NaCl team  use</a> where  they inline <code>pthread_getspecific</code> after verifying it contains the code they  expect.</p></li><li><p>Kostya Serebryany <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/72247">shares his concerns about contention between threads on  access to profile  counters</a>. For  a multi-threaded VP9 encoder, he's seeing 7x overhead when running with  <code>-fprofile-instr-generate</code> vs 15% when single-threaded. There's too much for  me to summarise, but there's a lot of discussion on potential solutions which  the interested reader should certainly take a look at.</p></li><li><p>Dan Gohman answers a question about LLVM IR access to struct fields with a  <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/72331">concise summary of how alias analysis information is currently used in  LLVM</a>.</p></li><li><p>Richard Carback is <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/72201">seeking feedback on his TableGen DAGISel  documentation</a>. His  <a href="https://github.com/draperlaboratory/fracture/wiki/How-TableGen%27s-DAGISel-Backend-Works">notes</a>  seem like a great start at documenting what has been up till now one of the  more mysterious parts of LLVM. Particularly those who have experience with  this code are encouraged to check the document for accuracy.</p></li></ul><h3>LLVM commits</h3><ul><li><p>LLVM's internal BumpPtrAllocator has been switched to using a vector of  pointers to slabs rather than a single linked list and the underlying  allocator is now a template parameter. <a href="http://reviews.llvm.org/rL206147">r206147</a>,  <a href="http://reviews.llvm.org/rL206149">r206149</a>. The allocator can now  also pass the size to the deallocation function, which improves performance  with some libraries (e.g. tcmalloc). <a href="http://reviews.llvm.org/rL20265">r206265</a>.</p></li><li><p>Support for building persistent strongly connected components has been added  to the LazyCallGraph. There are detailed comments on the reasoning of this  approach and some details on implementation in the commit message. <a href="http://reviews.llvm.org/rL206581">r206581</a>.</p></li><li><p>Constant hoisting has been enabled on PowerPC. <a href="http://reviews.llvm.org/rL206141">r206141</a>.</p></li><li><p>PseudoSourceValue is no longer a subclass of Value. <a href="http://reviews.llvm.org/rL206255">r206255</a>.</p></li><li><p>A DebugInfoVerifier has been implemented. <a href="http://reviews.llvm.org/rL206300">r206300</a>.</p></li><li><p>MIPS gained initial support for the IEEE 754-2008 NaN encoding. <a href="http://reviews.llvm.org/rL202812">r206396</a>.</p></li><li><p>OnDiskHashTable has been moved from Clang to LLVM. <a href="http://reviews.llvm.org/rL206438">r206438</a>.</p></li><li><p>ARM's IR-based atomics pass has been moved from Target to CodeGen, which  allows it to be used by ARM64. <a href="http://reviews.llvm.org/rL206485">r206485</a>,  <a href="http://reviews.llvm.org/rL206490">r206490</a>.</p></li><li><p>Module verification is now off by default in release builds for the JIT, but  this can be overridden. <a href="http://reviews.llvm.org/rL206561">r206561</a>.</p></li><li><p>The Cortex-A53 machine model description has been ported from AArch64 to  ARM64. <a href="http://reviews.llvm.org/rL206652">r206652</a>.</p></li></ul><h3>Clang commits</h3><ul><li><p>There is now a new hash algorithm for calculating the function hash for  instruction profiling, rewritten to help ensure the hash changes when control  flow does. <a href="http://reviews.llvm.org/rL206397">r206397</a>.</p></li><li><p>The thread safety analysis SSA pass has been rewritten. <a href="http://reviews.llvm.org/rL206338">r206338</a>.</p></li><li><p>Support for big endian ARM64 was added to Targets.cpp. <a href="http://reviews.llvm.org/rL206390">r206390</a>. It is also now possible to  disable NEON and crypto support for ARM64. <a href="http://reviews.llvm.org/rL206394">r206394</a>.</p></li></ul><h3>Other project commits</h3><ul><li>LLD now supports <code>--defsym=&lt;symbol&gt;=&lt;symbol&gt;</code>, as supported by GNU LD. <a href="http://reviews.llvm.org/rL206417">r206417</a>.</li></ul>
