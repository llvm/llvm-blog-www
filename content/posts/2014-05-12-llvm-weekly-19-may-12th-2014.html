---
author: Unknown
blogger_id: tag:blogger.com,1999:blog-6088150582281556517.post-3446474470430073674
blogger_orig_url: http://blog.llvm.org/2014/05/llvm-weekly-19-may-12th-2014.html
date: "2014-05-12T06:47:00Z"
modified_time: "2014-05-12T08:04:27.930-07:00"
tags: ["llvmweekly"]
title: 'LLVM Weekly - #19, May 12th 2014'
---

<p>Welcome to the ninteenth issue of LLVM Weekly, a weekly newsletter (published  every Monday) covering developments in LLVM, Clang, and related projects. LLVM Weekly is brought to you by <a href="http://asbradbury.org">Alex Bradbury</a>. Subscribe to future issues at <a href="http://llvmweekly.org">http://llvmweekly.org</a> and pass it on to anyone  else you think may be interested. Please send any tips or feedback to  <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#97;&#115;&#98;&#64;&#97;&#115;&#98;&#114;&#97;&#100;&#98;&#117;&#114;&#121;&#46;&#111;&#114;&#103;">&#97;&#115;&#98;&#64;&#97;&#115;&#98;&#114;&#97;&#100;&#98;&#117;&#114;&#121;&#46;&#111;&#114;&#103;</a>, or <a href="https://twitter.com/llvmweekly">@llvmweekly</a> or <a href="https://twitter.com/asbradbury">@asbradbury</a> on Twitter.</p><p>I'm flying out to San Francisco tomorrow and will be there for the Bay Area  Maker Faire at the weekend with some other Raspberry Pi Foundation people. If  you're around, be sure to say hi.</p> <p>The canonical home for this issue <a href="http://llvmweekly.org/issue/19">can be found here at llvmweekly.org</a>. </p>  <a name='more'></a> <h3>News and articles from around the web</h3><p>LLVM 3.4.1 <a href="http://blog.llvm.org/2014/05/llvm-341-release.html">has been  released</a>. This is a  bug-fix release so offers API and ABI compatibility with LLVM 3.4. Thanks to  everyone who contributed to the release by suggesting or backporting patches,  and for testing.</p><p>John Regehr has <a href="http://blog.regehr.org/archives/1146">shared some early results and  discussion</a> on using  <a href="https://github.com/google/souper/">Souper</a> (a new superoptimizer for LLVM IR)  in combination with Csmith and C-reduce in order to find missed optimisations  and then produce minimal test cases. This has already resulted in a <a href="http://llvm.org/bugs/show_bug.cgi?id=19711">new performance bug being filed</a> with  I'm sure many more to come.</p><p><a href="https://github.com/crange/crange">Crange</a>, a tool to index and  cross-reference C/C++ source code built on top of Clang has <a href="http://article.gmane.org/gmane.comp.compilers.clang.devel/36677">been  released</a>. It  aims to offer a more complete database than e.g. ctags, though the running  time on a large codebase like the Linux kernel is currently very high.</p><p><a href="https://github.com/go-llvm/llgo">llgo</a>, the LLVM-based compiler for Go is  <a href="https://groups.google.com/forum/#!topic/llgo-dev/8uBfmIkGM88/discussion">now  self-hosting</a>.</p><p>Last week I asked for benchmarks of the new <a href="https://trac.webkit.org/wiki/FTLJIT">JavascriptCore Fourth Tier LLVM  JIT</a>. Arewefastyet from Mozilla now  includes such results. FTLJIT <a href="http://arewefastyet.com/#machine=12&amp;view=breakdown&amp;suite=asmjs-apps">does particularly well on asm.js  examples</a>.</p><h3>On the mailing lists</h3><ul><li><p>The merge of AArch64 in to ARM64 has <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/72832">made impressive  progress</a>. It's likely the final switchover will take place this week, with AArch64 being  deleted and ARM64 renamed to AArch64. Ana Pazos <a href="http://article.gmane.org/gmane.comp.compilers.llvm.cvs/187546">shared a list of bugs  currently waiting to be  squashed</a>.</p></li><li><p>Andy Lutomirski <a href="http://article.gmane.org/gmane.comp.compilers.clang.devel/36685">requests that the llvm integer arithmetic with overflow  intrinsics be exposed as C  intrinsics</a>. It was pointed out that they <a href="http://clang.llvm.org/docs/LanguageExtensions.html#checked-arithmetic-builtins">actually are  exposed</a>  though Google is doing a poor job of indexing this fact, and in response a  <a href="http://gcc.gnu.org/bugzilla/show_bug.cgi?id=61129">bug has been filed with GCC</a> to expose similar  intrinsics.</p></li><li><p>Suminda Dharmasena <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/72850">kicked off a conversation about reducing or removing  platform specific LLVM  instructions</a>. The thread morphed into an interesting discussion about <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/72866">the issues arising  from gaps in LLVM's coverage for atomic memory  operations</a>.</p></li><li><p>Chandler Carruth <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/72847">asks for input on the problem of safely suspending JITting  threads through the C LLVM  API</a>.</p></li></ul><h3>LLVM commits</h3><ul><li><p>A new algorithm has been implemented for tail call marking. A build of clang  now ends up with 470k calls in the IR marked as tail vs 375k before. The total  tail call to loop conversions remains the same though. <a href="http://reviews.llvm.org/rL208017">r208017</a>.</p></li><li><p><code>llvm::function_ref</code> has been introduced and described in the LLVM  programmers manual. It is a type-erased reference to a callable object. <a href="http://reviews.llvm.org/rL208025">r208025</a>,  <a href="http://reviews.llvm.org/rL208067">r208067</a>.</p></li><li><p>Initial support for named register intrinsics (as previously discussed <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/71567">on  the mailing  list</a> has  landed. Right now, only the stack pointer is supported. Other non-allocatable  registers could be supported with not too much difficulty, allocatable  registers are much harder. <a href="http://reviews.llvm.org/rL208104">r208104</a>.</p></li><li><p>The <code>-disable-cfi</code> option has been removed. LLVM now requires assemblers to  support cfi (control-flow integrity) directives in order to generate stack  unwinding information. <a href="http://reviews.llvm.org/rL207979">r207979</a>.</p></li><li><p>The superword-level parallelism (SLP) pass is now enabled by default for  link time optimisation. <a href="http://reviews.llvm.org/rL208013">r208013</a>.</p></li><li><p>The llvm-cov documentation has been expanded  <a href="http://reviews.llvm.org/rL208098">r208098</a>.</p></li><li><p>The second and third patch of a series to improve MergeFunctions performance  to <code>O(n*log(n))</code> has been merged. <a href="http://reviews.llvm.org/rL208173">r208173</a>,  <a href="http://reviews.llvm.org/rL208189">r208189</a>.</p></li><li><p>The standard 'x86-64' CPU used as the default architecture now uses the  Sandy Bridge scheduling model in the hope this provides a reasonable default  over a wide range of modern x86-64 CPUs. <a href="http://reviews.llvm.org/rL208230">r208230</a>.</p></li><li><p>Custom lowering for the <code>llvm.{u|s}add.with.otherflow.i32</code> intrinsics as  been added for ARM. <a href="http://reviews.llvm.org/rL208435">r208435</a>.</p></li></ul><h3>Clang commits</h3><ul><li><p>MSVC ABI compatibility has again been improved. Clang now understands that  the 'sret' (a structure return pointer) is passed after 'this' for MSVC. <a href="http://reviews.llvm.org/rL208458">r208458</a>.</p></li><li><p>Initial codegen from OpenMP's <code>#pragma omp parallel</code> has landed. <a href="http://reviews.llvm.org/rL208077">r208077</a>.</p></li><li><p>Field references to struct names and C++11 aliases are now supported from  inline asm. <a href="http://reviews.llvm.org/rL208053">r208053</a>.</p></li><li><p>Parsing and semantic analysis has been implemented for the OpenMP  <code>proc_bind</code> clause. <a href="http://reviews.llvm.org/rL208060">r208060</a>.</p></li><li><p>clang-format gained initial support for JavaScript regex literals (yes,  clang-format can reformat your JavaScript!). <a href="http://reviews.llvm.org/rL208281">r208281</a>.</p></li></ul><h3>Other project commits</h3><ul><li><p>libcxxabi gained support for ARM zero-cost exception handling. <a href="http://reviews.llvm.org/rL208466">r208466</a>.</p></li><li><p>In libcxx, std::vector gained Address Sanitizer support. <a href="http://reviews.llvm.org/rL208319">r208319</a>.</p></li><li><p>The test suite from <a href="http://web.cs.uh.edu/~openuh/">OpenUH</a> has been added  to the openmp repository. <a href="http://reviews.llvm.org/rL208472">208472</a>.</p></li></ul>
