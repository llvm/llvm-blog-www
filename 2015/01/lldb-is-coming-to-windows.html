<!doctype html><html lang=en>
<head>
<title>LLDB is Coming to Windows - The LLVM Project Blog</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="LLVM Project News and Details from the Trenches">
<meta name=author content="Zachary Turner"><meta property="og:title" content="LLDB is Coming to Windows">
<meta property="og:description" content="We've spoken in the past&nbsp;about teaching Clang to fully support Windows and be compatible with MSVC. &nbsp;Until now, a big missing piece in this story has been debugging the clang-generated executables.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://blog.llvm.org/2015/01/lldb-is-coming-to-windows.html"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2015-01-20T10:48:00+00:00">
<meta property="article:modified_time" content="2015-01-20T10:48:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="LLDB is Coming to Windows">
<meta name=twitter:description content="We've spoken in the past&nbsp;about teaching Clang to fully support Windows and be compatible with MSVC. &nbsp;Until now, a big missing piece in this story has been debugging the clang-generated executables.">
<meta name=generator content="Hugo 0.89.4">
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin=anonymous>
<link rel=stylesheet href=https://blog.llvm.org/fontawesome/css/all.min.css>
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda">
<link rel=stylesheet type=text/css href=https://blog.llvm.org/css/styles.css></head>
<body>
<div id=container>
<header>
<h1>
<a href=https://blog.llvm.org/>The LLVM Project Blog</a>
</h1>
<ul id=social-media>
<li>
<a href=https://www.facebook.com/llvmorg title=Facebook>
<i class="fab fa-facebook fa-lg"></i>
</a>
</li>
<li>
<a href=https://github.com/llvm title=GitHub>
<i class="fab fa-github fa-lg"></i>
</a>
</li>
<li>
<a href=https://twitter.com/llvmorg title=Twitter>
<i class="fab fa-twitter fa-lg"></i>
</a>
</li>
<li>
<a href=https://www.youtube.com/c/LLVMPROJ title=Youtube>
<i class="fab fa-youtube fa-lg"></i>
</a>
</li>
</ul>
<p><em>LLVM Project News and Details from the Trenches</em></p>
</header>
<nav>
<ul>
<li>
<a href=https://blog.llvm.org/about>
<i class="fa-li fa fa-lg"></i><span>About</span>
</a>
</li>
<li>
<a href=https://blog.llvm.org/posts>
<i class="fa-li fa fa-lg"></i><span>Posts</span>
</a>
</li>
<li>
<a href=https://blog.llvm.org/tags>
<i class="fa-li fa fa-lg"></i><span>Tags</span>
</a>
</li>
<li>
<a href=https://llvm.org/>
<i class="fa-li fa fa-lg"></i><span>llvm.org</span>
</a>
</li>
</ul>
</nav>
<main>
<article>
<h1>LLDB is Coming to Windows</h1>
<aside>
<ul>
<li>By Zachary Turner</li>
<li>
<time class=post-date datetime=2015-01-20T10:48:00Z>Jan 20, 2015</time>
</li>
<li>
<em>
<a href=https://blog.llvm.org/tags/lldb>#LLDB</a>
,
<a href=https://blog.llvm.org/tags/clang>#Clang</a>
</em>
</li>
<li>3 minute read</li>
</ul>
</aside>
We've spoken in the <a href=http://blog.llvm.org/2014/07/clangllvm-on-windows-update.html>past</a>&nbsp;about teaching Clang to fully support Windows and be compatible with MSVC. &nbsp;Until now, a big missing piece in this story has been debugging the clang-generated executables. &nbsp;Over the past 6 months, we've started working on making LLDB work well on Windows and support debugging both regular Windows programs and those produced by Clang.<br><div><br></div><div>Why not use an existing debugger such as GDB, Visual Studio's, or WinDBG? &nbsp;There are a lot of factors in making this kind of decision. &nbsp;For example, while GDB understands the DWARF debug information produced by Clang on Windows, it doesn't understand the Microsoft C++ ABI or debug information format. &nbsp;On the other hand, neither Visual Studio nor WinDBG understand the DWARF debug information produced by Clang. &nbsp;With LLDB, we can teach it to support <i>both</i> of these formats, making it usable with a wider range of programs. &nbsp;There are also other reasons why we're really excited to work on LLDB for Windows, such as the tight integration with Clang which lets it support all of the same C++ features in its expression parser that Clang supports in your source code. &nbsp;We're also looking to continue adding new functionality to the debugging experience going forward, and having an open source debugger that is part of the larger LLVM project makes this really easy.</div><div><br></div><div>The past few months have been spent porting LLDB's core codebase to Windows. &nbsp;We've been fixing POSIX assumptions, enhancing the OS abstraction layer, and removing platform specific system calls from generic code. &nbsp;Sometimes we have needed to take on significant refactorings to build abstractions where they are necessary to support platform specific differences. &nbsp;We have also worked to port the test infrastructure to Windows and set up build bots to ensure things stay green.</div><div><br></div><div>This preliminary bootstraping work is mostly complete, and you can use LLDB to debug simple executables generated with Clang on Windows today. &nbsp;Note the use of the word "simple". &nbsp;At last check, approximately 50% of LLDB's tests fail on Windows. &nbsp;Our baseline, however, which is a single 32-bit executable (i.e. no shared libraries), single-threaded application built and linked with Clang and LLD using DWARF debug information, works today. &nbsp;We've tested all of the fundamental functionality such as:</div><div><ol><li>Various methods of setting breakpoints (address, source file+line, symbol name, etc)</li><li>Stopping at and continuing from breakpoints</li><li>Process inspection while stopped, such as stack unwinding, frame setting, memory examination, local variables, expression evaluation, stepping, etc &nbsp;(one notable exception to this is that step-over doesn't yet work well in the presence of limited symbol information).</li></ol><div>Of course, there is still more to be done. &nbsp;Here are some of the areas we're planning to work on next:</div></div><div><ol><li>Fixing low hanging fruit by improving the pass-rate of the test suite.</li><li>Better support for debugging multi-threaded applications.</li><li>Support for debugging crash dumps.</li><li>Support for debugging x64 binaries.</li><li>Enabling stepping through shared libraries.</li><li>Understanding PDB (for debugging system libraries, and executables generated with MSVC). &nbsp;Although the exact format of PDB is undocumented, Microsoft still provides a rich API for querying PDB in the form of the DIA SDK.</li><li>Adding debugging commands familiar to users of WinDBG (e.g. !handle, !peb, etc)</li><li>Remote debugging</li><li>Symbol server support</li><li>Visual Studio integration</li></ol><div>If you're using Clang on Windows, we would encourage you to <a href=http://lldb.llvm.org/build.html#BuildingLldbOnWindows>build LLDB</a> (it should be in the Windows <a href=http://llvm.org/builds/>LLVM installer</a> soon) and let us know your thoughts by posting them to <a href=http://lists.cs.uiuc.edu/mailman/listinfo/lldb-dev>lldb-dev</a>. &nbsp;Make sure you <a href="http://llvm.org/bugs/enter_bug.cgi?product=lldb">file bugs</a> against LLDB if you notice anything wrong, and we would love for you to dive into the code and help out. &nbsp;If you see something wrong, dig in and try to fix it, and post your patch to <a href=http://lists.cs.uiuc.edu/mailman/listinfo/lldb-commits>lldb-commits</a>.</div></div>
</article>
<section class=post-nav>
<ul>
<li>
<a href=https://blog.llvm.org/2015/01/llvm-weekly-55-jan-19th-2015.html><i class="fa fa-chevron-circle-left"></i> LLVM Weekly - #55, Jan 19th 2015</a>
</li>
<li>
<a href=https://blog.llvm.org/2015/01/llvm-weekly-56-jan-26th-2015.html>LLVM Weekly - #56, Jan 26th 2015 <i class="fa fa-chevron-circle-right"></i> </a>
</li>
</ul>
</section>
</main>
<footer>
<ul>
<li>
<h6>llvm.org |
Rendered by <a href=https://gohugo.io title=Hugo>Hugo</a> |
<a href=https://blog.llvm.org/index.xml>Subscribe </a></h6>
</li>
</ul>
</footer>
</div>
<script src=https://blog.llvm.org/js/scripts.js></script>
</body>
</html>