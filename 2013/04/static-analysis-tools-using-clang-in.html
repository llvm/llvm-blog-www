<!doctype html><html lang=en><head><title>The LLVM Project Blog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="LLVM Project News and Details from the Trenches"><meta name=author content="Issam"><meta property="og:title" content="Static analysis tools: using Clang in CppDepend"><meta property="og:description" content="Static analysis is a method of computer program debugging that is done by examining the code without executing the program. The process provides an understanding of the code structure, can help to ensure that the code adheres to industry standards, and can find bugs not easy to detect."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.llvm.org/2013/04/static-analysis-tools-using-clang-in.html"><meta property="article:published_time" content="2013-04-15T03:39:00+00:00"><meta property="article:modified_time" content="2013-04-15T03:39:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Static analysis tools: using Clang in CppDepend"><meta name=twitter:description content="Static analysis is a method of computer program debugging that is done by examining the code without executing the program. The process provides an understanding of the code structure, can help to ensure that the code adheres to industry standards, and can find bugs not easy to detect."><meta name=generator content="Hugo 0.68.3"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin=anonymous><link rel=stylesheet href=https://blog.llvm.org/fontawesome/css/all.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda"><link rel=stylesheet type=text/css href=https://blog.llvm.org/css/styles.css></head><body><div id=container><header><h1><a href=https://blog.llvm.org/>The LLVM Project Blog</a></h1><ul id=social-media><li><a href=https://www.facebook.com/llvmorg title=Facebook><i class="fab fa-facebook fa-lg"></i></a></li><li><a href=https://github.com/llvm title=GitHub><i class="fab fa-github fa-lg"></i></a></li><li><a href=https://twitter.com/llvmorg title=Twitter><i class="fab fa-twitter fa-lg"></i></a></li><li><a href=https://www.youtube.com/c/LLVMPROJ title=Youtube><i class="fab fa-youtube fa-lg"></i></a></li></ul><p><em>LLVM Project News and Details from the Trenches</em></p></header><nav><ul><li><a href=https://blog.llvm.org/about><i class="fa-li fa fa-lg"></i><span>About</span></a></li><li><a href=https://blog.llvm.org/posts><i class="fa-li fa fa-lg"></i><span>Posts</span></a></li><li><a href=https://blog.llvm.org/tags><i class="fa-li fa fa-lg"></i><span>Tags</span></a></li><li><a href=https://llvm.org/><i class="fa-li fa fa-lg"></i><span>llvm.org</span></a></li></ul></nav><main><article><h1>Static analysis tools: using Clang in CppDepend</h1><aside><ul><li><time class=post-date datetime=2013-04-15T03:39:00Z>Apr 15, 2013</time></li><li>Issam</li><li><em><a href=https://blog.llvm.org/tags/clang>#Clang</a>
,
<a href=https://blog.llvm.org/tags/products>#Products</a></em></li><li>3 minutes read</li></ul></aside><div dir=ltr style=text-align:left trbidi=on><br>Static analysis is a method of computer program debugging that is done by examining the code without executing the program. The process provides an understanding of the code structure, can help to ensure that the code adheres to industry standards, and can find bugs not easy to detect.<br><br>To develop a C / C++ static analysis tool, a parser is needed to parse the source code. C++ is a very powerful language but its syntax is a little bit complicated, what makes the parser not easy to develop.<br><br>When we began the development of <a href=http://www.cppdepend.com/>CppDepend </a>about four years ago we needed a reliable C / C++ parser. &nbsp;At that time, Clang was an option but was not widely used and we didn’t know if it would ultimately develop into a fully-featured compiler frontend.<br><br>Last year, for the&nbsp;major release of CppDepend 3.0,&nbsp;we re-evaluated our C / C++ parser with a goal of getting more reliable results. &nbsp;We checked Clang to see where its evolution went and were very surprised that it now implements virtually all C++'11 features and became very popular. &nbsp;Clang now provide solid infrastructure to write tools that need syntactic and semantic information about a program.<br><br><a name=more></a><br><br>Clang is designed to be modular, and like other compilers it has three phases:<br><ul style=text-align:left><li>The front end that parses source code, checking it for errors, and builds a language-specific Abstract Syntax Tree (AST) to represent the input code.</li><li>The optimizer: its goal is to do some optimization on the AST generated by the front end.</li><li>The back end: generates the final code to be executed by the machine, it depends of the target architecture.</li></ul><br><div class=separator style=clear:both;text-align:center><a href=http://4.bp.blogspot.com/-WDcl2mtJ8Do/UWnL-S-FgiI/AAAAAAAAAn0/3LTWx4a32XY/s1600/clang.gif imageanchor=1 style=margin-left:1em;margin-right:1em><img border=0 src=http://4.bp.blogspot.com/-WDcl2mtJ8Do/UWnL-S-FgiI/AAAAAAAAAn0/3LTWx4a32XY/s1600/clang.gif></a></div><br><br>In our case we needed only to use the front end parser, and we use the generated AST. For that we added our custom&nbsp;ASTFrontEndAction.<br>Each ASTFrontEndAction create one or many ASTConsumer as shown by the following dependency gaph:<br><br><div class=separator style=clear:both;text-align:center><a href=http://4.bp.blogspot.com/-Fvq7jfoaiwY/UWnTLIOexFI/AAAAAAAAAoE/86hDIkA9OaQ/s1600/clang2.png imageanchor=1 style=margin-left:1em;margin-right:1em><img border=0 src=http://4.bp.blogspot.com/-Fvq7jfoaiwY/UWnTLIOexFI/AAAAAAAAAoE/86hDIkA9OaQ/s1600/clang2.png></a></div><br><br>ASTConsumer is an abstract class, and we have to implement our AST consumer for our specific needs. And to do that we had take a look at the implementation of the existing AST Consumers to understand how they works, and here are all the classes inheriting from ASTConsumer:<br><br><div class=separator style=clear:both;text-align:center><a href=http://3.bp.blogspot.com/-3I8Luf_nK8Y/UWnVKzU3ooI/AAAAAAAAAoQ/aBd4RBORAjM/s1600/clang3.png imageanchor=1 style=margin-left:1em;margin-right:1em><img border=0 src=http://3.bp.blogspot.com/-3I8Luf_nK8Y/UWnVKzU3ooI/AAAAAAAAAoQ/aBd4RBORAjM/s1600/clang3.png></a></div><br>And we took &nbsp;ASTPrinter and ASTDumpXML as examples to understand how to implements our specific AST consumer.<br><br>&nbsp;Thanks to all the developers behind LLVM and Clang for their big efforts to deliver a powerful compiler, and to thank all open source C / C++ contributors, we are giving you a CppDepend "Pro license" for free. &nbsp;CppDepend can be used to analyze a code base in order to:<br><br>•<span class=Apple-tab-span style=white-space:pre> </span>Improve the code base quality.<br>•<span class=Apple-tab-span style=white-space:pre> </span>Help new contributors to understand the existing code base.<br>•<span class=Apple-tab-span style=white-space:pre> </span>Automate the code review to be sure that all the coding rules specified by the manager are satisfied.<br>•<span class=Apple-tab-span style=white-space:pre> </span>Generate custom reports for documentation purpose.<br><br>To get your CppDepend Pro license, you can just send us a mail at support@cppdepend.com with the following infos:<br><br>•<span class=Apple-tab-span style=white-space:pre> </span>Name of the contributor.<br>•<span class=Apple-tab-span style=white-space:pre> </span>Link to the patches that you have contributed.<br><br>Thanks!</div></article><section class=post-nav><ul><li><a href=https://blog.llvm.org/2013/04/llvm-recipient-of-2012-acm-system.html><i class="fa fa-chevron-circle-left"></i>LLVM Recipient of the 2012 ACM System Software Award</a></li><li><a href=https://blog.llvm.org/2013/04/status-of-c11-migrator.html>Status of the C++11 Migrator <i class="fa fa-chevron-circle-right"></i></a></li></ul></section></main><footer><h6>llvm.org |
Rendered by <a href=https://gohugo.io title=Hugo>Hugo</a> |
<a href=https://blog.llvm.org/index.xml>Subscribe</a></h6></footer></div><script src=https://blog.llvm.org/js/scripts.js></script></body></html>