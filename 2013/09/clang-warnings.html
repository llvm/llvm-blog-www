<!doctype html><html lang=en><head><title>Clang Warnings - The LLVM Project Blog</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="LLVM Project News and Details from the Trenches"><meta name=author content="Richard Trieu"><meta property="og:url" content="https://blog.llvm.org/2013/09/clang-warnings.html"><meta property="og:site_name" content="The LLVM Project Blog"><meta property="og:title" content="Clang Warnings"><meta property="og:description" content="Clang has two types of diagnostics, errors and warnings.  Errors arise when the code does not conform to the language.  Such things as missing semi-colons and mismatched braces prevent compilation and will cause Clang to emit an error message."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2013-09-04T17:03:00+00:00"><meta property="article:modified_time" content="2013-09-04T17:03:00+00:00"><meta property="article:tag" content="Warnings"><meta property="article:tag" content="C++"><meta property="article:tag" content="Clang"><meta name=twitter:card content="summary"><meta name=twitter:title content="Clang Warnings"><meta name=twitter:description content="Clang has two types of diagnostics, errors and warnings.  Errors arise when the code does not conform to the language.  Such things as missing semi-colons and mismatched braces prevent compilation and will cause Clang to emit an error message."><meta name=generator content="Hugo 0.128.0"><link rel=stylesheet href=https://blog.llvm.org/css/normalize.min.css><link rel=stylesheet href=https://blog.llvm.org/fontawesome/css/all.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda"><link rel=stylesheet type=text/css href=https://blog.llvm.org/css/styles.css></head><body><div id=container><header><h1><a href=https://blog.llvm.org/>The LLVM Project Blog</a></h1><ul id=social-media><li><a href=https://www.facebook.com/llvmorg title=Facebook><i class="fab fa-facebook fa-lg"></i></a></li><li><a href=https://github.com/llvm title=GitHub><i class="fab fa-github fa-lg"></i></a></li><li><a href=https://twitter.com/llvmorg title=Twitter><i class="fab fa-twitter fa-lg"></i></a></li><li><a href=https://www.youtube.com/c/LLVMPROJ title=Youtube><i class="fab fa-youtube fa-lg"></i></a></li></ul><p><em>LLVM Project News and Details from the Trenches</em></p></header><nav><ul><li><a href=https://blog.llvm.org/about><i class="fa-li fa fa-lg"></i><span>About</span></a></li><li><a href=https://blog.llvm.org/posts><i class="fa-li fa fa-lg"></i><span>Posts</span></a></li><li><a href=https://blog.llvm.org/tags><i class="fa-li fa fa-lg"></i><span>Tags</span></a></li><li><a href=https://llvm.org/><i class="fa-li fa fa-lg"></i><span>llvm.org</span></a></li></ul></nav><main><article><h1>Clang Warnings</h1><aside><ul><li>By Richard Trieu</li><li><time class=post-date datetime=2013-09-04T17:03:00Z>Sep 4, 2013</time></li><li><em><a href=https://blog.llvm.org/tags/warnings>#Warnings</a>
,
<a href=https://blog.llvm.org/tags/c++>#C++</a>
,
<a href=https://blog.llvm.org/tags/clang>#Clang</a></em></li><li>14 minute read</li></ul></aside><span id=docs-internal-guid-64a5b270-651c-62fd-ef8a-a37c15d794b3></span><br>Clang has two types of diagnostics, errors and warnings. &nbsp;Errors arise when the code does not conform to the language. &nbsp;Such things as missing semi-colons and mismatched braces prevent compilation and will cause Clang to emit an error message.<br><br>On the other hand, warnings are emitted on questionable constructs on language conforming code. &nbsp;Over time, certain patterns have been determined to have a strong likelihood of being a programming mistake. &nbsp;Some examples of these include: order of operations confusion, mistaking similarly named language features, and easily made typos that still result in valid code.<br><br>Although warnings may have false positives, the utility of finding bugs early usually outweigh their downsides. &nbsp;Keep reading for a demonstration of Clang's warnings, as well as a comparison to GCC's warnings.<br><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span id=docs-internal-guid-64a5b270-651c-62fd-ef8a-a37c15d794b3><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span></span><br><a name=more></a><span id=docs-internal-guid-64a5b270-651c-62fd-ef8a-a37c15d794b3><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>The following code consists of &lt; 200 lines of code, one library, and one header file, only used for printing. It is legitimate C++ code and can be compiled into a program. &nbsp;Take a few moments and see if you can spot any bugs in the following code.</span></span></div><span id=docs-internal-guid-64a5b270-651c-62fd-ef8a-a37c15d794b3></span><br><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span id=docs-internal-guid-64a5b270-651c-62fd-ef8a-a37c15d794b3><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace"><br></span></span></span></div><span id=docs-internal-guid-64a5b270-651c-62fd-ef8a-a37c15d794b3></span><br><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span id=docs-internal-guid-64a5b270-651c-62fd-ef8a-a37c15d794b3><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">main.cc</span></span></span></div><span id=docs-internal-guid-64a5b270-651c-62fd-ef8a-a37c15d794b3></span><br><ol style=margin-bottom:0;margin-top:0><span id=docs-internal-guid-64a5b270-651c-62fd-ef8a-a37c15d794b3><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">#include "sort.h"</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">#include &lt;iostream></span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">int main(int argc, char** argv) {</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;int V[] = { 3, 4, 7, 10, 11, 1, 2, 0};</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;cout &lt;&lt; "Unsorted numbers:" &lt;&lt; endl;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;for( auto num : V )</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;cout &lt;&lt; " " &lt;&lt; num &lt;&lt; endl;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;if (!sort(V, sizeof(V)/sizeof(V[0]))) {</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;cout &lt;&lt; "Sort failed." &lt;&lt; endl;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;return 1;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;}</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;cout &lt;&lt; "Sorted numbers:" &lt;&lt; endl;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;for( auto num : V )</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;cout &lt;&lt; " " &lt;&lt; num &lt;&lt; endl;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;return 0;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">}</span></span></div></li></span></ol><span id=docs-internal-guid-64a5b270-651c-62fd-ef8a-a37c15d794b3><br><span style=font-family:Consolas;font-size:15px;vertical-align:baseline;white-space:pre-wrap></span></span><br><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span id=docs-internal-guid-64a5b270-651c-62fd-ef8a-a37c15d794b3><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">sort.h</span></span></span></div><span id=docs-internal-guid-64a5b270-651c-62fd-ef8a-a37c15d794b3></span><br><ol style=margin-bottom:0;margin-top:0><span id=docs-internal-guid-64a5b270-651c-62fd-ef8a-a37c15d794b3><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">#ifndef _EXPERIMENTAL_WARNINGS_SORT_H_</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">#define _EXPERIMNETAL_WARNINGS_SORT_H_</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">#include &lt;iostream></span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">#ifdef _NDEBUG</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">#define ASSERT(cond) \</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;if(!cond) cout &lt;&lt; __FILE__ &nbsp;&lt;&lt; ":" &lt;&lt; &nbsp;__LINE__ &lt;&lt; " " &lt;&lt; #cond &lt;&lt; endl;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">#else</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">#define ASSERT(cond) if (!cond) {}</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">#endif</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">enum SortType {</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;unknown = 0,</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;min_invalid = 3,</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;bubble = 1,</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;quick,</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;insert</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">};</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">class Sort {</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">public:</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;Sort(int vec[], int size, bool sorted = false);</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;bool IsSorted();</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;void Begin(SortType Type = unknown);</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">private:</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;void BubbleSort();</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;void QuickSort() { }; // Not implemented yet.</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;void InsertSort() { }; // Not implemented yet.</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;int* vec_;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;bool sorted_;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;int &amp;size_;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">};</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">static bool sort(int vec[], int size) {</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;Sort sort(vec, size);</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;sort.Begin(bubble);</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;return sort.IsSorted();</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">}</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">#endif // _EXPERIMENTAL_WARNINGS_SORT_H_</span></span></div></li></span></ol><span id=docs-internal-guid-64a5b270-651c-62fd-ef8a-a37c15d794b3><br><span style=font-family:Consolas;font-size:15px;vertical-align:baseline;white-space:pre-wrap></span></span><br><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span id=docs-internal-guid-64a5b270-651c-62fd-ef8a-a37c15d794b3><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">sort.cc</span></span></span></div><span id=docs-internal-guid-64a5b270-651c-62fd-ef8a-a37c15d794b3></span><ol style=margin-bottom:0;margin-top:0><span id=docs-internal-guid-64a5b270-651c-62fd-ef8a-a37c15d794b3><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">#include &lt;iostream></span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">#include "sort.h"</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">Sort::Sort(int vec[], int size, bool sorted)</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;: sorted_(sorted_), vec_(vec), size_(size) {</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;if (size > 50)</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;ASSERT("!Vector too large. &nbsp;Number of elements:" + size);</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;int sum;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;for (unsigned i = 0; !i == size; ++i) {</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;int sum = sum + vec_[i];</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;++i;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;}</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;ASSERT(sum &lt; 100 && "Vector sum is too high");</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">}</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">bool Sort::IsSorted() {</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;return sort;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">}</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">static bool CheckSort(int V[]) {</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;bool ret;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;for (int i = 1; i != sizeof(V)/sizeof(V[0]); ++i)</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;if (V[i] > V[i - 1])</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = false;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;return ret;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">}</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">static const char* TypeToString(SortType Type) {</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;const char* ret;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;switch (Type) {</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;case bubble:</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = "bubble";</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;case quick:</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = "quick";</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;case insert:</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = "insert";</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;}</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;return ret;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">}</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">void Sort::Begin(SortType Type) {</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;cout &lt;&lt; "Sort type: ";</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;cout &lt;&lt; Type == 0 ? "Unknown type, resorting to bubble sort"</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: TypeToString(Type);</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;cout &lt;&lt; endl;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;switch (Type) {</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;default:</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;bubble:</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BubbleSort(); break;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;quick:</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QuickSort(); break;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;insert:</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InsertSort(); break;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;}</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;sorted_ = CheckSort(vec_);</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">}</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><span style="font-family:Courier New,Courier,monospace"><span style=vertical-align:baseline;white-space:pre-wrap></span></span></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">void Sort::BubbleSort() {</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;for (int i = 0; i &lt; size_; ++i) {</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;for (int j = 1; j &lt; size_; ++i) {</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int a = vec_[j-1];</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int b = vec_[j];</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (a > b); {</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec_[j-1] = b;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec_[j] = a;</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;}</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;}</span></span></div></li><li dir=ltr style=font-size:15px;list-style-type:decimal;vertical-align:baseline><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">}</span></span></div></li></span></ol><span id=docs-internal-guid-64a5b270-651c-62fd-ef8a-a37c15d794b3><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><br class=kix-line-break>Did you find any bugs? Many common problems are hard to spot from just reading the code. To make a better coding experience, Clang has many diagnostics that will flag these mistakes. The bugs in the code are detailed below.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>main.cc does not have any problems. &nbsp;It merely is a wrapper around the library so that a binary can be produced and run, although running it will not sort the array properly.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>sort.h is the header file to the library.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">1:#ifndef _EXPERIMENTAL_WARNINGS_SORT_H_</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">2:#define _EXPERIMNETAL_WARNINGS_SORT_H_</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>The first warning triggers on the first two lines. &nbsp;Header guards are used by libraries to prevent multiple <span style="font-family:Courier New,Courier,monospace">#include</span>’s of a file from producing redefinition errors. &nbsp;To work, the <span style="font-family:Courier New,Courier,monospace">#ifndef</span> and <span style="font-family:Courier New,Courier,monospace">#define</span> must use the same macro name.. &nbsp;The transposition of E and N produces different names and is an easy bug to overlook. &nbsp;Worse, this sort of bug can hide within headers and never produce a problem when singly included and then much later start producing problems when someone double includes this header. Clang has -Wheader-guard to catch this. GCC does not catch this.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>Next, examine the custom ASSERT macro used:</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">7.#define ASSERT(cond) \</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">8. &nbsp;&nbsp;&nbsp;if(!cond) cout &lt;&lt; ...</span></span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>The problem is treating the macro parameter as a function parameter. &nbsp;Macro arguments are not evaluated. &nbsp;Instead, they are substituted in as typed. &nbsp;Thus, code as </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">ASSERT(x == 5)</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> becomes </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">if(!x == 5) cout &lt;&lt; ...</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> &nbsp;The proper fix is to enclose the macro parameter in parentheses, as </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">if (!(cond)) cout &lt;&lt; ...</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> &nbsp;This is caught by -Wlogical-not-parentheses. Being inside a macro definition, the warning will trigger when the macros are used with a note pointing back here. GCC has no equivalent for -Wlogical-not-parentheses.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">13:enum SortType {</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">14: &nbsp;unknown = 0,</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">15: &nbsp;min_invalid = 3,</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">16:</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">17: &nbsp;bubble = 1,</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">18: &nbsp;quick,</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">19: &nbsp;insert</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">20:};</span></span></div><br><span style=font-family:Consolas;font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>In this enum, a few non-valid values are defined, then the valid enums listed. &nbsp;Valid enums use the auto increment to get their values. &nbsp;However, </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">min_invalid</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> and </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">insert</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> both have value 3. &nbsp;Luckily, -Wduplicate-enum will identify enums in this situation and point them out. GCC will not warn on this.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style=font-family:inherit>On to sort.cc</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;line-height:1.15;white-space:pre-wrap><span style=font-family:inherit>Class constructor:</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">4:Sort::Sort(int vec[], int size, bool sorted)</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">5: &nbsp;&nbsp;&nbsp;: sorted_(sorted_), vec_(vec), size_(size) {</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace"><br></span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-family:inherit;font-size:15px;vertical-align:baseline;white-space:pre-wrap>Members from sort.h:</span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">34: &nbsp;int* vec_;</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">35: &nbsp;bool sorted_;</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">36: &nbsp;int &amp;size_;</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><br></div><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>Checking the only constructor of the class, numerous problems can be seen here. &nbsp;First notice that the variables are declared <span style="font-family:Courier New,Courier,monospace">vec_</span>, <span style="font-family:Courier New,Courier,monospace">sorted_</span>, then <span style="font-family:Courier New,Courier,monospace">size_</span>, but in the constructor, they are listed as <span style="font-family:Courier New,Courier,monospace">sorted_</span>, <span style="font-family:Courier New,Courier,monospace">vec_</span>, then <span style="font-family:Courier New,Courier,monospace">size_</span>. &nbsp;The order of initialization is order they were declared, meaning <span style="font-family:Courier New,Courier,monospace">vec_</span> is initialized before <span style="font-family:Courier New,Courier,monospace">sorted_</span>. &nbsp;There is no order dependence here, but -Wreorder will warn that the orders don’t match. GCC also has -Wreorder.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>Next, <span style="font-family:Courier New,Courier,monospace">sorted_</span> is initialized with itself instead of with sorted. &nbsp;This leads to uninitialized value in <span style="font-family:Courier New,Courier,monospace">sorted_</span>, which is caught by the aptly named -Wuninitialized. For this case, GCC has -Wself-assign and -Wself-init.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>Finally, notice that <span style="font-family:Courier New,Courier,monospace">size_</span> is declared as a reference but size is not passed by reference. &nbsp;size only lives until the end of the constructor while the reference <span style="font-family:Courier New,Courier,monospace">size_</span> will continue to point to it. &nbsp;-Wdangling-field catches this problem.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">7: &nbsp;&nbsp;&nbsp;ASSERT("!Vector too large. &nbsp;Number of elements:" + size);</span></span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>Two problems here. &nbsp;Adding an integer to a string literal does not concatenate the two together. &nbsp;Instead, since a string literal is a pointer of type <span style="font-family:Courier New,Courier,monospace">const char *</span>, this actually performs pointer math. &nbsp;With a sufficiently integer, this can even cause the pointer to go past the end of the string into some other memory. &nbsp;-Wstring-plus-int warns on this case. GCC has no equivalent warning.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style="font-family:Courier New,Courier,monospace"><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>7: &nbsp;&nbsp;&nbsp;ASSERT("!Vector too large. &nbsp;More than 50 elements.");</span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span></span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>When fixed, another problem arises. &nbsp;A common pattern is to include a string literal describing the assert. &nbsp;If the assert is always to fire, then expression should evaluate to false. &nbsp;The string literal evaluates to true, so just negate it to get a false value, right? &nbsp;Well, a number of common typos can happen.</span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><br></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><b>These values evaluate true:</b></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">"true"</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">"false"</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">"!true"</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">"!false"</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">"any string"</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace"><br></span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><b>These values evaluate to false:</b></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">!"true"</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">!"false"</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style="font-family:courier new,Courier,monospace;font-size:15px;line-height:1.15;white-space:pre-wrap">!"any string"</span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">!"!any string"</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace"><br></span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>Due to that, -Wstring-conversion will warn when a string literal is converted to a true boolean value. &nbsp;Use </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">ASSERT(false && “string”)</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> or </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">ASSERT(0 && “string”)</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> instead. GCC has no equivalent warning.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">9: &nbsp;int sum;</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">10: &nbsp;for (unsigned i = 0; !i == size; ++i) {</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">11: &nbsp;&nbsp;&nbsp;int sum = sum + vec_[i];</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">12: &nbsp;&nbsp;&nbsp;++i;</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">13: &nbsp;}</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">14:</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">15: &nbsp;ASSERT(sum &lt; 100 && "Vector sum is too high");</span></span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>More bugs here. &nbsp;The obvious one is the that <span style="font-family:Courier New,Courier,monospace">sum</span> is uninitialized on line 9. &nbsp;When it gets used on line 15, this causes undefined behavior. &nbsp;This gets caught by -Wuninitialized which suggests setting it to 0 to fix. GCC's -Wuninitialized also catches this.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>A poor negation causes a bad condition in the for-loop. &nbsp;</span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">!i == size</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> is equivalent to </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">(!i) == size</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> due to order of operations. &nbsp;-Wlogical-not-parentheses will suggest </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">!(i == size)</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> to correct this. Again, GCC does not have a -Wlogical-not-parantheses equivalent.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>On line 10 and 12, for every loop iteration, two </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">++i</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> will increment the variable. &nbsp;A warning in -Wloop-analysis catches this. This warning is Clang-specific.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>Two separate problems happen on line 11. &nbsp;Another -Wuninitialized warning here for using <span style="font-family:Courier New,Courier,monospace">sum</span> in its own initialization. &nbsp;Also, -Wshadow will warn that the variable <span style="font-family:Courier New,Courier,monospace">sum</span> inside the loop is different from the variable <span style="font-family:Courier New,Courier,monospace">sum</span> outside the loop. Both GCC's and Clang's versions of these warning catches these problems.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">18:bool Sort::IsSorted() {</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">19: &nbsp;return sort;</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">20:}</span></span></div><br><span style=font-family:Consolas;font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>The member variable is called <span style="font-family:Courier New,Courier,monospace">sorted_</span>. &nbsp;<span style="font-family:Courier New,Courier,monospace">sort</span> is a static function wrapper defined at sort.h line 39. &nbsp;Here, the function is automatically converted to a function pointer, then to true. &nbsp;Caught by -Wbool-conversion. GCC has function address to bool conversions placed under -Waddress.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">22:static bool CheckSort(int V[]) {</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">23: &nbsp;bool ret;</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">24: &nbsp;for (int i = 1; i != sizeof(V)/sizeof(V[0]); ++i)</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">25: &nbsp;&nbsp;&nbsp;if (V[i] > V[i - 1])</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">26: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = false;</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">27: &nbsp;return ret;</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">28:}</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>On line 23, <span style="font-family:Courier New,Courier,monospace">ret</span> is not initialized. &nbsp;On line 26, a value may be assigned to it, but it is possible that no path will through the code will set it a value. &nbsp;The warning -Wsometimes-uninitialized will warn on this and give suggestions on how to fix. GCC will not catch this.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>On line 24 inside the for loop conditional, there is </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">i != sizeof(V)/sizeof(V[0])</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>, which is trying to keep </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">i</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> as a valid array index. &nbsp;However, the </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">sizeof</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> calculation produces the wrong result. &nbsp;This would be correct if </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">V</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> was declared inside the function. &nbsp;However, as a parameter, </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">V</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> has type </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">int*</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>, causing the </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">sizeof</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> to take the size of a pointer instead of the array. &nbsp;A separate size argument needs to be passed to the function. Caught by -Wsizeof-array-argument, a Clang specific warning.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">30:static const char* TypeToString(SortType Type) {</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">31: &nbsp;const char* ret;</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">32: &nbsp;switch (Type) {</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">33: &nbsp;&nbsp;&nbsp;case bubble:</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">34: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = "bubble";</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">35: &nbsp;&nbsp;&nbsp;case quick:</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">36: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = "quick";</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">37: &nbsp;&nbsp;&nbsp;case insert:</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">38: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = "insert";</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">39: &nbsp;}</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">40: &nbsp;return ret;</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">41:}</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>A simple enum to string converter function. &nbsp;Like the previous function, <span style="font-family:Courier New,Courier,monospace">ret</span> is again uninitialized, and will be caught by -Wsometimes-uninitialized. &nbsp;Clang warns here because it can analyze all the paths through the switch and determine that at least one will not assign a value to <span style="font-family:Courier New,Courier,monospace">ret</span>. GCC does not have -Wsometimes-uninitialized.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>On the switch statement, Clang and GCC notices that <span style="font-family:Courier New,Courier,monospace">unknown</span> is not used, caught by the warning -Wswitch.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>Clang also has a special attribute, </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">[[clang::fallthrough]];</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>, to mark intended fallthroughs in switch cases. &nbsp;By marking all cases intended uses of fallthrough, Clang can warn on the unintended cases, such as these three cases without break statements. &nbsp;Otherwise, the fallthrough will cause all three cases to return <span style="font-family:Courier New,Courier,monospace">“insert”</span>. This is -Wimplicit-fallthrough, a Clang-specific warning.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">43:void Sort::Begin(SortType Type) {</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">44: &nbsp;cout &lt;&lt; "Sort type: ";</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">45: &nbsp;cout &lt;&lt; Type == 0 ? "Unknown type, resorting to bubble sort"</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">46: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: TypeToString(Type);</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">47: &nbsp;cout &lt;&lt; endl;</span></span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>While </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">cout</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> uses </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">operator&lt;&lt;</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> to stream various types to output, it still is an operator and C++ has a defined order of operations. &nbsp;Shifts (&lt;&lt; and >>) are evaluated before conditional operators (?:). &nbsp;To add some parentheses to clear up the order, this becomes:</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">45: &nbsp;((cout &lt;&lt; Type) == 0) ? "Unknown type, resorting to bubble sort"<br class=kix-line-break>46: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: TypeToString(Type);</span></span></div><br><span style=font-family:Consolas;font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>First, </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">Type</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> gets pushed to </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">cout</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>, via </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">operator&lt;&lt;</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>. &nbsp;</span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">operator&lt;&lt;</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> returns the </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">cout</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> stream again. &nbsp;Streams are convertible to bools to check if they are valid, which is checked against false, converted from 0. &nbsp;The result of this comparison is used for the conditional operator, whose result is not used anywhere. GCC doesn't catch this, but Clang's -Woverloaded-shift-op-parentheses does.</span></div><br><span style=font-family:Consolas;font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">48: &nbsp;switch (Type) {</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">49: &nbsp;&nbsp;&nbsp;default:</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">50: &nbsp;&nbsp;&nbsp;bubble:</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">51: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BubbleSort(); break;</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">52: &nbsp;&nbsp;&nbsp;quick:</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">53: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QuickSort(); break;</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">54: &nbsp;&nbsp;&nbsp;insert:</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">55: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InsertSort(); break;</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">56: &nbsp;}</span></span></div><br><span style=font-family:Consolas;font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>Another switch statement, also triggers -Wswitch because none of the enum values are represented. &nbsp;Each of the enum values is missing a case, causing them to become labels instead. &nbsp;The warning -Wunused-label hints that something is wrong here. -Wunused-label is in both GCC and Clang.</span></div><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">61: &nbsp;for (int i = 0; i &lt; size_; ++i) {</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">62: &nbsp;&nbsp;&nbsp;for (int j = 1; j &lt; size_; ++i) {</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">69: &nbsp;&nbsp;&nbsp;}</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">70: &nbsp;}</span></span></div><br><span style=font-family:Consolas;font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>This double nested loop gives bubble sort its n</span><span style=font-size:9px;vertical-align:super;white-space:pre-wrap>2</span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> running time. &nbsp;Rather, in this case, an infinite running time. &nbsp;Note the increment in both of the loops happen on </span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">i</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>, even in the inner loop. &nbsp;</span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">j</span></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap> is never touched, either here or inside the loop. &nbsp;-Wloop-analysis will give a warning when all the variables inside a for loop conditional does not change during the loop iteration. Only in Clang.</span></div><br><span style=font-family:Consolas;font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">63: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int a = vec_[j-1];</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">64: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int b = vec_[j];</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">65: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (a > b); {</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">66: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec_[j-1] = b;</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">67: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec_[j] = a;</span></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><span style="font-family:Courier New,Courier,monospace">68: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></div><br><span style=font-family:Consolas;font-size:15px;vertical-align:baseline;white-space:pre-wrap></span><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>Then -Wempty-body warning will trigger on line 65. &nbsp;The semi-colon here become the entirety of the loop body while the value swap happens on every loop iteration, not only when the conditional is true. Both Clang and GCC has this warning.</span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><br></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>This is just a small sample of the warnings that Clang provides. Along with informative diagnostic messages, these warnings help programmers avoid common coding pitfalls. In particular, it saves the programmer time tracking down valid but not intended code later. These warnings make Clang an exceptional productivity and code quality booster for coders.</span><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><br></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>For reference, a list of warnings discussed above:</span><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><br></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>-Wbool-conversion</span><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>Warns on implicit conversion of a function pointer to a true bool value. GCC has this warning as part of -Waddress.</span><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><br></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>-Wempty-body</span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>Warns when an if statement, while loop, for loop, or switch statement only has a semi-colon for the body, and is on the same line as the rest of the statement. Clang and GCC warning.</span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><br></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>-Wheader-guard</span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>Detects when the #ifndef and #define have different macro names. This causes the header guard to fail to prevent multiple inclusions. </span><span style=font-size:15px;line-height:17px;white-space:pre-wrap>This is a Clang-specific warning available in SVN trunk and slated for the 3.4 release.</span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><br></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;line-height:17px;white-space:pre-wrap>-Wimplicit-fallthrough</span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;line-height:17px;white-space:pre-wrap>Enabling this warning will cause a diagnostic to be emitted for all fallthroughs in switch statements that have not been annotated. Requires compilation in C++11 mode. Clang-specific warning, available in the 3.2 release.</span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;line-height:17px;white-space:pre-wrap><br></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>-Wlogical-not-parentheses</span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>This warning is part of the -Wparentheses. This group of warnings suggests parentheses in cases where users may read the code differently than the compiler. This warning in particular will trigger when the logical not operator ('!') is applied to the left hand side of a comparison when it was meant to apply to the whole conditional. "!x == y" is different from "!(x == y)" since "!x" will be evaluated before the equality comparison. </span><span style=font-size:15px;line-height:17px;white-space:pre-wrap>This is a Clang-specific warning available in SVN trunk and slated for the 3.4 release.</span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><br></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>-Wloop-analysis</span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>Detects questionable code in loops. It catches two interesting loop patterns: a for-loop has an increment/decrement in its header and has the same increment/decrement for the last statement in the loop body, which will execute only half the intended iterations, and when the variables in the for-loop comparison are not modified during the loop, possibly indicating an infinite loop. Clang-specific warning. Unmodified loop variables warning is available in 3.2 and onward. Detection of double increments/decrements is in SVN trunk and slated for the 3.4 release.</span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><br></span><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>-Woverloaded-shift-op-parentheses</span><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>The overloaded shift operator is used mainly with streams, such as cin and cout. However, the shift operator has higher precedence than some operators, such as comparison operators, which may cause unexpected problems. This warning suggests parentheses to disambiguate the order of evaluation. Clang-specific warning available since the 3.3 release.</span><br><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><br></span><br><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;line-height:1.15;white-space:pre-wrap>-Wshadow</span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;line-height:1.15;white-space:pre-wrap>Variable names in an inner scope may take the same name as a variable in an outer scope, yet refer to different variables. &nbsp;Then the variable in the outer scope may be difficult or impossible to refer to while inside the inner scope. &nbsp;-Wshadow points out such variable name reuse. &nbsp;Both Clang and GCC has this warning.</span><br><span style=font-size:15px;line-height:1.15;white-space:pre-wrap><br></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;line-height:1.15;white-space:pre-wrap>-Wsizeof-array-argument</span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;line-height:1.15;white-space:pre-wrap>Warns when attempting to take the sizeof() of an array that is a parameter. These arrays are treated as a pointer, which will return an unexpected size. Clang-specific warning.</span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;line-height:1.15;white-space:pre-wrap><br></span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>-Wstring-conversion</span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap>A literal string has type const char *. As a pointer, it is convertible to a bool, but in most cases, the conversion to bool is not intended. This warning will trigger on such conversions. Clang-specific warning.</span></div><div dir=ltr style=line-height:1.15;margin-bottom:0;margin-top:0><span style=font-size:15px;vertical-align:baseline;white-space:pre-wrap><br></span></div><div dir=ltr style=margin-bottom:0;margin-top:0><span style=font-size:15px;line-height:17px;white-space:pre-wrap>-Wswitch</span><br><span style=font-size:15px;line-height:17px;white-space:pre-wrap>This warning detects when an enum type is used in the switch, and some values of the enum are not represented in the cases. Clang and GCC warning.</span><br><span style=font-size:15px;line-height:17px;white-space:pre-wrap><br></span></div><div dir=ltr style=margin-bottom:0;margin-top:0><span style=font-size:15px;line-height:17px;white-space:pre-wrap>-Wuninitialized</span><br><span style=font-size:15px;line-height:17px;white-space:pre-wrap>When a variable is declared, its value is uninitialized. If its value is used elsewhere before being initialized, undefined behavior may result. Present in both Clang and GCC. Clang performs additional analysis, such as following multiple code paths. Some items caught by Clang's warning falls under different warnings in GCC, such as -Wself-assign and -Wself-init.</span><br><span style=font-size:15px;line-height:17px;white-space:pre-wrap><br></span></div><div dir=ltr style=margin-bottom:0;margin-top:0><span style=font-size:15px;line-height:17px;white-space:pre-wrap>-Wunique-enum</span><br><span style=font-size:15px;line-height:17px;white-space:pre-wrap>Enum elements can either be declared explicitly to a value, or implicitly which gives it the value of the previous element plus one. Clang-specific warning available since the 3.3 release.</span><br><span style=font-size:15px;line-height:17px;white-space:pre-wrap><br></span></div><div dir=ltr style=margin-bottom:0;margin-top:0><span style=font-size:15px;line-height:17px;white-space:pre-wrap>-Wunused-label</span><br><span style=font-size:15px;line-height:17px;white-space:pre-wrap>Warns when a label is present in code, but never called. Clang and GCC warning.</span><br><span style=font-size:15px;line-height:17px;white-space:pre-wrap><br></span><span style=font-size:15px;line-height:17px;white-space:pre-wrap>* Edited September 10, 2013. Spelling corrections were made. Warnings which were first available in 3.2 or later are noted. If not marked, the warning has been around since before the 3.2 release.</span></div></div></span></article><section class=post-nav><ul><li><a href=https://blog.llvm.org/2013/08/object-caching-with-kaleidoscope.html><i class="fa fa-chevron-circle-left"></i> Object Caching with the Kaleidoscope Example Program</a></li><li><a href=https://blog.llvm.org/2013/09/a-path-forward-for-llvm-toolchain-on.html>A path forward for an LLVM toolchain on Windows <i class="fa fa-chevron-circle-right"></i></a></li></ul></section></main><footer><ul><li><h6>llvm.org |
Rendered by <a href=https://gohugo.io title=Hugo>Hugo</a> |
<a href=https://blog.llvm.org/index.xml>Subscribe</a></h6></li></ul></footer></div><script src=https://blog.llvm.org/js/scripts.js></script></body></html>